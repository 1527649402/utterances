{"version":3,"sources":["deparam.ts","repo-regex.ts","page-attributes.ts","utterances-api.ts","oauth.ts","encoding.ts","github.ts","time-ago.ts","comment-component.ts","bus.ts","timeline-component.ts","new-comment-component.ts","utterances.ts"],"names":[],"mappings":";;;;AAAA,SAAA,OAAA,CAAwB,KAAxB,EAAqC;AACnC,QAAI,KAAJ;AACA,ACFF,QDEQ,ACFR,ODEe,ACFf,GAAe,EDEb,2BCFF;ADGE,QAAM,SAAS,oBAAf;AACA,QAAM,SAAS,SAAT,MAAS,CAAC,CAAD,EAAU;AAAK,eAAA,mBAAmB,EAAE,OAAF,CAAU,IAAV,EAAgB,GAAhB,CAAnB,CAAA;AAAwC,AGH3D,KHGX,GGHW,cAAA,GAAiB,6CAAjB;AHIX,AELF,IAAA,IFKQ,QELR,CFK8C,EAA5C,KELF,WAAA,CAAA;AFOE,AIPF,AFCA,IEDA,AFCA,OFMS,QAAQ,AENjB,IEDA,GJOwB,IAAP,CAAY,AIP7B,IFCA,CFMiB,CAAf,EAAmC,IENrC,MEDA,CAAA,OFCA,CAAA,CAAA;AFOI,AIPJ,AFEA,IEFA,KFEA,MFKW,CIPX,MJOkB,EIPlB,GFEA,CFKwB,CAAN,CAAP,AELX,CFKI,IAA2B,AIP/B,CAAA,MJOsC,MAAM,CAAN,CAAP,CAA3B;AACD,AKPH,ADCA,AFCE,IEDI,IFCE,CGFR,QHEiB,EEDO,MCDxB,CAAiC,CHEhB,MGFjB,CHEiB,CGF+B,AHEvB,CEDD,QFCU,MEDV,AFCC,CAAgB,EEDH,IFCb,CAAuB,CAAvB,CAAR,CAAf,IEDF;AJOE,AKPA,ADCF,AFEE,IEFI,IFEA,GFIG,GKPG,CDCQ,EJMlB,GEJ+B,EGHb,EHGlB,KGHU,CAAgB,EDCR,GCDR,EAAuB,EAAvB,CAAV,MDCkB,GAAc,QAAlC;AJOC,AKPC,ACJF,AFMA,AFCE,IIPF,AFMM,IFCA,GGHG,GCJT,KFMwB,GENxB,AJOmC,IAAjC,EED+B,ECFL,CCJ5B,CAAA,EFMwB,GCFW,ADEI,KCFC,OAAL,CAAP,CAAnB,CAAP,GDEF;AJNA,AKKC,ACJD,AFOA,AFAE,IIPF,AFOA,IJRA,AEQM,IEAN,GJRA,EMCA,CNDA,MIQA,AFAsB,CFRtB,AMCA,KJOE,EAA4B,KIP9B,CAAA;ANYA,AKXA,ACAA,AFUE,AFHE,AKPJ,IDAA,ACAM,IFAN,CLWA,IIDE,CJCF,CAAsB,EOXH,CPWnB,AIDE,AGTA,EPU4B,AEJd,CEGd,CGViB,CDAnB,CDAA,AECQ,GFDR,AHOuB,IIPvB,CCAmB,EAEjB,KLKc,CAAZ,CKLK,EFFT,AEAmB,EAEN,IDFb,CAAA,GCAmB,EAGjB,OAAO,EAAP,GAAY,EAHK,EAGD,MAHC,EAIjB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAJA,EAII,KAJJ,EAKjB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,CALL,EAKQ,MALR,EAMjB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,EANL,EAMS,OANT,CAAnB;APYE,AMVF,AFKmB,AFCf,AKCJ,IDPM,ACOA,IPGE,IEJA,CEDW,GJKH,CMVG,CNUjB,EOHgD,EAAE,CHFjC,GAAa,AFCV,GKCqC,MLDvD,CKC8C,CLDjB,CKCmC,EHFjD,EELnB,CCOyE,SAAvB,EAAkC,MAAM,SAAxC,EAAlD;ACVA,ARcE,AMVF,AFKU,AFCJ,AKEN,ICZA,AFIM,KNUC,AOFP,IPEa,AILH,GFCA,AKEV,CCZA,ARcE,AOFsB,CHHd,GJKW,AILY,GJK/B,AOFF,CCZA,AJSU,CJKgB,AOFe,ILFjB,CKExB,CLFM,CIN6B,ACQiB,CLFxB,GMV5B,CAAA,qCFIA;AEFA,ARaI,AMVJ,AFOI,AFDI,AKEN,ICXI,AFGA,ICQE,IPEA,AIHA,IJGI,CQbO,CDWD,ILFJ,IAAI,EMTlB,AFG8B,ACQF,EPEpB,CAAmB,AEJb,CAAU,EKEU,CPE1B,CAAJ,EAA8B,GOFN,EAA1B,sBDRF,kBJMc,CAAN;AOPR,ADDA,ARaM,AMVN,AFOM,AFDC,AKEL,IEVE,ADDE,AFGA,ICQA,MEVN,GLSW,CJGC,AOFI,IPEV,AIHA,AGCJ,CPEkB,COFE,CHDH,CIV6C,YJUhC,GEPW,CNUJ,GIHpB,CJGC,AIHoB,IJGI,CIHC,EJGzB,GAA4B,KIH7B,CAAb,aJG6D,IAAI,IAAJ,CAAnB,CAA1C,EMVN;AGAA,ADFE,ARaG,AMVL,AFQK,AFFC,AKEF,IDRE,KGDN,ALMI,CAGE,KGAK,CDRO,AJMR,CEEG,AFFF,CMTK,AJWV,CERN,CFQgB,CAAG,CKTnB,CAA8B,CPOpB,CKEN,CLFgB,GOPpB,EAA4C,APOlC,CMVsD,CNUrC,UAAjB,EAA6B,OAA7B,CAAqC,SAArC,MAAoD,CAAC,CAAzD,EAA4D;AONhE,ADFA,ARaC,AMTH,AFOG,AFFK,AKEL,AGhBH,IJSI,AITJ,KJSA,QGFe,ADFA,MCEb,GCPF,ERcoB,EMX4C,IEHhE,CRc2B,SAAP,CAAZ,UQdR,CAAA;ADQE,ADFA,ARaA,AMTF,AFQE,AFHK,AKEL,AGhBF,IJSI,AITJ,IJSA,ACOM,GPEG,AIDP,CIZQ,ADWA,AGhBV,CHgBE,IPEa,GQhBiD,AEFhE,CDOmB,ATWV,CAAW,GAAX,AIDP,CJCA,AIDI,CMjBN,CAAA,CDOE,EAA2B,CLUvB,SAAJ,EAAI,CKVJ,MLUA,EAAS;AKTV,ADFC,ARaD,AMTD,AKXA,ATgBK,AKEH,AGfF,IJQI,AKXJ,ADGA,MJQA,CEJS,ADWA,CIlBT,CPkBE,EGAW,CAAJ,GAAQ,CIlBjB,IDGA,GCHA,CAAA,APkBE,EGA0B,MAAnB,AGfT,IHesC,UAAU,GAAV,GAAgB,WAAW,IAAI,CAAf,CAApD,EAAuE;AEZzE,ADHgE,ARShE,AMCA,AKVA,APgBI,AFFD,AKEC,AGTF,CFPF,GGAM,CTIJ,GODF,ATMA,CMCA,EJIS,EFLT,AOOS,AGTP,CHSE,CLFS,CFLb,GIOW,EKbX,ATMA,CWTwB,CLUxB,CGPA,AHO+B,AFMf,KAAZ,CMTF,CJGF,AIFY,EJE4E,AJIzD,EQP7B,EDJF,ACMY,ERKH,EAA8B,CQPrC,EAE6B,0XCT/B;AFQA,ADDA,AFIE,AKTF,APeG,AFFC,AKED,AGTS,AEZZ,IHYI,ADDJ,AGLM,ACNN,KRmBW,GEJD,CIHE,IDAK,ACAL,CDAM,CAAlB,CHGkB,AIHN,EROM,CMRlB,ANQmB,CQPP,AEZZ,CNeE,AKTyB,KTaD,EUnB1B,GJWA,SNQmB,CAAf,MUnBJ,CAAA,IDMwD,KAAK,eAAL,CAAxD;AFQA,ADAE,AFEA,AKRF,ATYI,AKGF,AGVU,AEZZ,IDOA,ACPA,ILsBQ,CETR,EHES,CJID,CMNN,AJQA,AMTU,EEZZ,GLsBkB,AGVN,CJGK,EIHL,CDCZ,CHEE,AMfF,CVmBoB,CONpB,CENA,APcY,AMTA,GFCV,ADS2B,CCRlB,ADQO,CAAhB,CLHM,CAAqB,AUnB7B,CRqBE,AQrBF,CVmBQ,CEEY,CIRlB,CGNF,CHQY,ENIyB,OAAO,EMN1C,EAEoC,UNID,CAAjC,EAAyD;AOL3D,ADAS,AFET,AKEA,APIE,AFFE,AKGJ,AGlBiB,AEOnB,IAAA,IHEQ,AFSA,KCTG,AFEA,AKET,ADbiB,CEOnB,CLWe,EETE,ALQR,CFFG,EMND,CFEQ,AIXA,CNiBf,AFFY,AURhB,CJEW,CETuC,CNiBjC,CKRS,AFSA,AGlBP,CJWjB,AJIU,CAAU,EONL,ADAN,ADSmB,CETC,AFShB,AKXf,CDME,AJKA,AKXF,CDOY,APGR,IOJF,EAEmB,IFNnB,EEIA,EAE8D,aTAb,OAAO,cAAP,CAAvC,CAAN;AOLJ,ADAU,AFEX,AKCC,APKE,AFFC,AKGH,AGhBQ,AEKV,IAAA,IHEM,AFSE,IINN,CHHU,AEPF,GNeF,AGCQ,EGhBN,CDOO,CEGf,CJMmB,AGhBK,CAAhB,EFOE,AGGV,EJMc,CCTJ,ADSe,AKX3B,EHEE,EAA2B,IGF7B,ELWqC,CCTzB,MDSI,CAAd,YKXF,CAAA;AHGI,ADCQ,AFJZ,AKMY,APKN,AFFH,AKID,AGZE,AEAJ,IAAA,CVGS,GIJT,ACaM,GLJG,CMLG,CGEA,ADLH,GHYK,CIPF,AJON,ECTM,CGEA,APKF,AMVN,CHYe,CDbnB,CICmB,CCKP,CLNZ,EEIY,ADSa,GKZzB,CJGY,CEHgB,CNUL,IAAjB,CGE8B,AKZpC,CNDA,AFW6B,KGEJ,CGZN,CAAuB,CHYG,CAA3C,EAA8C,KGZ7B,CAAf,OEAJ,CAAA;AHGG,ADAS,AFEZ,AKCqB,APKb,AFFJ,AKIA,AGZA,AEAJ,IAAA,KNIA,GEFkB,AIFlB,CDKqB,ADLZ,CRQC,CKIC,GLJG,CSHO,CDLjB,AEAJ,CFAiB,CJIjB,AKCqB,CHHH,AFEK,AJIb,AKIO,CLJG,GURpB,CDKqB,ACLrB,CLYuB,CGZnB,CFEc,AEFS,ENUN,CENrB,AIJI,CAA2B,CJIa,GEFhC,CFEZ,EAA8D,CFMtD,CAAwB,CMV5B,EHYa,CAAyB,CHFL,QGEpB,EHFT,AGE6C,aAApC,CAAb,ELJM,CAAN;AOLF,ADDU,AFGV,AKJQ,APUH,AFFJ,AKIA,AGZC,AECJ,SAAA,ENGS,CEHmB,CGDlB,ADAD,IDEM,ALMT,EEJW,CIJb,CJIF,AIJe,EDEf,AEFQ,APUG,AQTb,CAAe,CJAa,CGDL,IDAnB,CCAM,EHCkB,AEDC,SECd,CJAH,aIAZ,2OFDI;ADGF,ADFU,AFIV,AK0DQ,APpDF,AFDN,AKGA,AGLE,AELJ,QHAQ,APOF,CILC,AMFP,CVOQ,CKGC,CCZ+B,CFItC,AK0DQ,ADvDD,GJHK,EGFmB,AGAjC,EHAmC,APOjB,CKGC,AKVnB,CNEE,ACQO,ECZ+B,AG8D9B,ADvDN,CHKmB,CEVkB,APOnC,AKGoB,CIkDF,ATrDtB,AQFqB,EREI,GMTa,AEOZ,CNGP,CKRY,CFUE,CEVgB,GE4D3B,ADvDD,CNGf,AMH4B,CFPxB,AJUiB,AGEH,GEV+B,AFUb,EHFV,EGER,EEVO,CFUkB,CEVjD,EFUqB,EHFf,CMHe,CNGuB,AGEQ,AGLC,GHKhC,GAAmC,EHFlD,EGEe,GAAuC,IGL1D,EHKK,GAAiE,QAAK,GAAL,GAAS,IAAT,GAAa,OAArF;AETA,ADHU,AFKV,AK0DE,APpDG,AFDH,AKGH,AGLG,AELF,QAAI,CNEC,EGFE,CDH0C,CEQ1C,CJHP,AJKQ,GILK,CK0DN,ATrDK,CQFV,GDLF,ACKgB,CDLG,APOX,CAAU,EUPd,CNEJ,GGFA,AE4DE,CAAkB,ADvDK,CDLG,CDHqB,MG+D/C,CC5DE,CJH6C,AIGxC,CHAT,AE4D+B,EDvDf,CRER,AQF+B,CRErC,ISqDqC,EC5DnC,CFKY,CCuDe,ADvD7B,CCuD0C,EC5DnB,EJHf,EG+DuC,AC5DjD,EAA+B,MD4Da,CAAc,KAA3B,CAA7B;AF3DH,ADHG,AFKF,AK0DE,APnDC,AFFF,AKhBH,AGcI,AELA,QNEI,ACXR,KCMS,AJKL,AMGK,CNIH,CGlBN,AKSW,CD4DH,EL1DU,ACXlB,ECMI,AEQA,CNIS,AMJI,CJHK,AK0DT,APnDP,CIZa,CJYH,AQTL,CRSQ,AGlBnB,IDWkB,CAAY,AK0DtB,CAAc,CH/DM,AEQxB,CAAyB,KAAK,GELvB,CAAkB,CNEc,AK0DnC,CDvDJ,CFRe,CAAuB,AG+DL,GAA7B,IAAoC,CL1D1B,CELC,CAAf,AFKoD,GK0DP,CL1D/B,AMFW,CNE3B,MK0D0C,CAAc,MC5D7B,CAAK,KD4DU,GAA6B,GC5D9D,CAAP,ED4D0E,QAAL,CAAc,YAAnF,EAAiG;AFpErG,ADMI,AFKF,AK0DI,APnDH,AFDD,AQHE,AELD,QHTH,APiBM,CEZK,CFYH,EINE,CELD,AEQA,MJHP,CELE,AFKc,CGXlB,ADMiB,AEQb,CCuDO,ATpDS,AQHF,CJHhB,CGXF,AHWsB,GIGC,CRGjB,CAAJ,CMXE,AG+DE,CH/DqB,AG+DP,ATpDS,CIN3B,AIGE,EFRA,AFK4B,CELD,CG+DzB,CFrEN,AEqE0B,MAApB,GAAgC,MAAK,CH/DvC,OG+DkC,CAAc,OL1DlD,KK0DoC,GAA0B,IAA1D;AH9DF,AFKF,AK0DI,ATpDF,AQHA,AELF,QNEI,CAAC,EMFE,CJHD,CEQC,CRGC,GMXG,CNWC,EURL,CNEU,CELX,AG+DF,CTpDI,CEbC,AFaS,AQHhB,CJHG,CAAiB,CELD,QG+DjB,AC5DG,CAAgB,CNElB,CELH,AFKE,EEL8B,EFKI,KJM9B,CAAN,EINoC,IMFf,CNEe,CAAM,KAAN,KAAgB,EMF/B,CAAK,CNE5B,EAA4D,MMFrD,CAAP;AJFI,AFKF,AK0DC,ATpDF,AQHA,AELF,gBNEW,CELD,MFKP,CELE,AFKc,CELD,EFKf,CAAoB,MELlB,CAAuB,GAAvB,CAA2B,IFK7B,EAAqC,QELnC,GFK4C,QAAA,KAAA,CAAM,KAApD;AEJC,AFKF,AK0DA,APnEQ,AFgBT,AQHO,AELT,KRRE,GFgBM,AURA,CDqDE,ECrDV,CAAY,CAAC,KVQK,IQHT,EELG,EAAc,KVQR,AQHT,CAAA,GELiB,GVQR,CAAU,AQHnB,GAAP,CRGgB,AURQ,CVQO,CURrB,CAAZ,EACG,GVOqC,CQHvB,AELjB,CACQ,EVOU,CAAhB,AQHA,EAAgC,KEJzB,EAAD,EAAc;AJJlB,AFKF,AK2DQ,APvDV,AFGE,AQHE,QRGE,AURI,GNCD,AFIT,CITU,CGgEA,ADvDD,GNAT,AQLU,CFKN,CJJF,CMDQ,CVQQ,AQHF,AELN,IVQR,AQHE,CCuDM,CHhEc,ANYA,ESoDC,UAAC,KAAD,EAAa,CHhEM,kBAApB,CAApB;AACA,AFKH,AK2DG,APjFJ,AF6BI,AQHA,CN1BJ,EAAA,KQoBiB,IFMP,CFTD,CNYC,CUTO,GD6DP,ATpDI,AUTG,CAAA,CJHb,AESc,CFTD,ENYP,CAAU,GQHK,GFTrB,EGgEA,ADvD0B,CFTD,IESX,GAAoB,IAAlC,CRGkC,OAAO,IAAzB,GAA6B,IAAvC,CAAN,SMX4B,KAAK,QADR,GACgB,6CADhB,GAER,KAAK,KAFG,GAEE,qDAFF,GAGR,KAAK,UAHG,GAGU,UAHV,GAGoB,gLAHpB,GAQY,KAAK,QARjB,GAQyB,+BARzB,GAQsD,KAAK,KAR3D,GAQgE,kFARhE,GAUY,QAVZ,GAUoB,uBAVpB,GAUyC,WAAA,OAAA,CAAQ,KAAK,GAAL,EAAR,EAAoB,IAAI,IAAJ,CAAS,UAAT,CAApB,CAVzC,GAUkF,qCAVlF,IAYjB,cAAc,8CAA0C,WAA1C,GAAqD,SAAnE,GAA+E,EAZ9D,IAYgE,wEAZhE,GAejB,SAfiB,GAeR,gCAfjB;AAmBA,AFZJ,AK0DI,APvDS,AFGV,AQHC,AEPuB,INIrB,IFGO,GQPc,EJgBlB,AJTI,AMAJ,GJHS,AK0DV,APvDa,CMAR,GNAY,CMAR,AEPoB,CD8DxB,ADvDT,EAAgB,CNAC,CISjB,AIhBuB,CROd,CMAW,AEPoB,ID8DxC,AC9DuB,CFOE,AEPF,CD8DF,ODvDD,CAAc,MAAlC,EAA0C,GAA1C,EAA+C;AFUhD,AFZD,AK0DI,APtDN,AFGE,AQJI,AER2C,CADjD,QRUA,EFGS,GIPG,AFIZ,GAAA,AMDW,QAAL,CAAc,CAAd,EAAiB,cAAjB,CAAgC,KAAhC;AFWG,AFbL,AK0DC,APtDH,AFGE,AQJC,AEPL,SAAA,ERQS,IEJE,AFIT,AFGS,CEHM,EQRjB,CAAmB,EJiBV,CFbS,CJOC,CAAR,AUXX,CVUS,CUV+B,IJiB/B,AIjBT,CJiBS,AFdG,AFKiB,CQR4B,ERQxC,GAAgB,IISxB,GAAP,GJT+B,KAAA,CAAM,CISnB,CJTqB,MISvC,EAAuC,MJTY,YAAd,EAAN,CAA/B;AIUE,AFbA,AK0DA,APtDF,AFGE,AQJA,AEPF,UAAA,CRQO,CISC,ENNA,AQJN,CNCS,GOsDJ,CL1DM,GFIN,AFGS,CEHG,AFGX,AUXR,CVSO,AUTO,CJiBO,CFbD,CIGlB,CCuDA,EH7CwB,CG6CN,EPtDD,EENT,AK4DR,EH7CmB,CAAa,EJTf,EAAO,AQRZ,YJiBZ,EIjBY,CAAK,MAAnB;AJkBU,AFbR,AK0DA,APvD4B,AFI5B,AQJD,AEND,KFDO,GECD,IJgBI,GFbD,AFGsB,COuDzB,ATnDI,GMMA,AIhBO,GD6DN,APvDmC,CQNzB,GD6DnB,CH7CQ,CG6CO,ATnDK,GMMZ,GNNA,GAAqB,CEJA,GAAkC,GFI3B,AUVjB,IRMS,EFIpB,GAAqC,QAHxC,AUPU,CAAsB,IAAtB,EAA4B,KAA5B,CAAjB;AJgBU,AFhBA,AK8DN,APxDoE,AFKtE,AQHK,AEPP,KNFgB,AFOT,EACJ,IADI,CIUS,AJTR,CQNC,IAAT,CAAc,EVUA,ESmDL,ADtDF,CFQS,CJTR,KQNR,CD6DI,AC7DsB,CJeV,AG8CE,ADtDX,CAAA,KRGwB,EMKrB,AG8CN,AC7D+B,CFO5B,ECsDsB,CTnDf,AQHd,GCsDI,ATnDoC,AUVxC,OVU+C,AQH/B,KAAhB,EAAmC,MRGK,CAA1B,GAAkD,iBAJzD;AMSG,AFXV,AK0DI,APxDU,AFKZ,AQHA,AENF,QAAI,IJasB,AFXlB,CIID,ENFO,EQJD,CFMX,CRGS,EELS,AMEL,CCsDN,CC5DU,EJaO,CEPxB,ERFK,CEAO,EAAgB,AQJjB,EJaa,AJTM,COwD5B,AC5D0B,CD4DR,AC5DtB,EAAiC,ERIK,IIS5B,AG+CN,EPxD0B,COwDG,CPxDa,GOwD1C,UPxDuD,SAA7B,EAAhB,CAAA;AISJ,AFVR,AK0DC,APzDoE,AFMrE,AQHA,AENA,KREK,EAEJ,IAFI,CIU+B,AJR9B,AMEF,GJJG,EIIP,AENA,EFMW,ERGA,CIPG,AFER,EIQ8B,MJR9B,CEHA,CEW8B,AJRtB,AFDT,CUHL,CAAiB,MAAM,CJYf,KIZR,EAA+B,CAA/B,EAAkC,IAAlC,CAAuC,UAAC,EAAD,EAAU;AJcjD,AFXA,AK0DA,APxDE,AFKF,AQHE,YFOE,AJTE,IFKE,AUVkC,CJcjC,AEPF,CCsDF,CL1DM,EFEI,EAAb,AFKa,CMIX,AG+CJ,AC7D0C,CJczB,AG+CL,APxDO,CEFD,CMHwB,CFOxC,CFOE,ANXC,AQIc,CFOG,CG+CL,EDtDf,EFOE,AFbE,CIMoB,GCsDd,CH/CoB,AG+CN,EDtDM,GFOK,AG+CrC,EAAiC,GH/CjC,AEPE,EFO0C,AG+C5C,CAAuC,YAAA;AH9CrC,AFXF,AKyD6C,APvDzC,AFKJ,AQHC,AERqD,SFMtD,IRKK,EIPE,AIIA,CFOD,GJTK,AQN2C,CVW1C,CMID,EG8CkC,AT1DxC,CS0DwC,EH9CvC,EJTc,AQN2C,GJe1C,CJTV,EAAP,EISsB,OIf4B,CAAyB,GJe7E,EAAqC,AIfe,CAAA;AJgBlD,AFfE,AK4DwC,APtD3C,AFKH,AQHE,AETmF,SAArF,ID6DA,EAAgD,ATjDzC,EQHA,ECoDP,CAAqD,CH7C5C,CNJK,KATT,CMaD,AEPF,CFOe,AEPE,GCoDkC,MH7CjD,CAAuB,GAAvB,CAA2B,CEP7B,CAAiC,MAAjC,MFOE;AACD,AFtBW,AKmEZ,APtDA,AFKF,AQHC,AETF,CNNH,YEoBM,EJPO,IISA,ENJI,CSiDN,EPtDW,IAAT,AFKW,GELK,COsDvB,GAAkB,APtDX,CAAqB,IOsD5B,MPtD4B,IAAA,EAAI;AIU9B,AFVR,AKuDM,APvDoC,AFLjC,AQQN,AERD,KVAA,AQCO,GEDH,CNKN,QMLe,ERK2B,EIU7B,CG6CF,CC5DU,ENKrB,CAA0B,CFAwB,CIU1C,CAAa,AIfnB,CD4DI,CAAc,AC5DS,ERKa,CEA1C,AFAyD,EEAb,EEUpC,CAAuB,AG6CzB,GAAyB,CAAC,EH7CxB,CAA8B,GG6CD,IAA/B,OH7CE,IJV6E,IAA3C,CAAA;AIWnC,AFVL,AKuDI,APxDsF,AFO3F,AQFQ,AETL,QNKI,CFDK,CAAP,MECU,MKuDL,ADnDF,GJJgB,KKuDnB,CAAc,ADnDX,CJJO,AIIP,CJJwB,GAAjB,AKuDV,CLvD+B,EKuDT,EAAtB,IDnDG,GAAP,QJJc,CAAd,CIIqB,OAArB,EAA0C;AFQtC,AFXJ,AKuDI,APxDD,AFQQ,AQHT,AETD,KRHM,EAQJ,CEAG,AJOK,GEfJ,CAQC,AMIA,IFOE,IFXQ,EKuDT,APvDD,AFOG,CEPH,CMIY,CNJX,AFOmB,GQHJ,CJJG,EEWF,GG4CrB,CAAkB,CH5CQ,AFXZ,CAAiB,GAAjB,CAAqB,EEWd,AG4CrB,CH5CkC,CNJ3B,CSgDsB,EDnDT,GCmDpB,UH5CA,GFXc,AIIE,CJJpB,AIKI,OADgB,EAEhB,KAAK,IAAL,GAAY,KAAK,IAAL,CAAU,KAAtB,GAA8B,IAFd,CAAlB;AFQE,AFXJ,AKuDG,APxDY,AMOb,AEVF,QNIM,AMJA,KDsDJ,AD5CK,GFKG,AFXI,AFDC,CQHA,IRGA,AMOb,CNPmB,AMOL,GJNO,CIMrB,AEVI,CRGS,AMOM,CFKC,EJZO,CAAd,CECD,AMJC,CNIgB,AMJf,GNIF,AIMZ,CJNiC,IEWA,AIfpB,EAAiB,aNIlB,CAAd,CEWI;AACA,AFVJ,AKsDC,APzDgC,AMQ/B,AEVA,KRNK,EAQ4B,CEG7B,CKsCE,GC3CF,CFUC,GEVL,CREiC,CQFvB,CNKK,CIKf,CAAa,ENRoB,EIalB,AJbwB,IIarC,GAAoB,AFVM,CIK5B,CAA0B,EJLX,CEUY,AFVM,OIKG,CFKlC,CFVwC,GAA3B,CAAjB,CIKE,EAA6C,KAAK,MAAlD;AFME,AFVJ,AK5BE,APwB6C,AMS7C,AEVE,QNKE,KK5BC,ADiCA,EJLM,CFJkC,AQDvC,EFUN,ECjCA,CPwB6C,CIcjC,AJduC,COxBpC,EHsCb,CFVoB,CFJuB,CIc3B,EJdyC,EOxBnC,CCuBJ,CJeI,AJdqB,CAAoB,CEIjC,EMLZ,CJeS,AIf3B,ERCqE,CEI5D,EEUT,CFVuC,AK5B1B,CAAuB,CPwB2B,QEId,AK5BpC,CAAf,OL4BF;AEWI,AFTJ,AK7BE,APuBgF,AMUhF,AEVE,KRRG,CAAP,GEcK,IK7BE,ADiCA,CJJP,EMNQ,CNMK,CAAC,EK7BZ,CAAa,ACuBX,CJeU,CFTd,AMNe,CFUb,CFKE,GAAgB,EGtClB,CAAuB,EHsCA,CGtCvB,CAA2B,QHsCT,GAAkB,OGtCpC,GHsCE;AAEA,AFVJ,AK7BE,APuBH,AMUG,AEVI,SNMD,IK7BE,CDiCL,EFMQ,EFVV,EK7BE,CL6Be,AK7BF,CL6BG,KIIhB,IFMuB,AFVzB,EMNuB,IDvBrB,CAA8B,IHwCzB,AIjBgB,ODvBrB,EAA2C,ECuBtB,CAAY,GDvBU,EHuCpB,CACC,AIjBe,MAAlB,EAA0B,EDvB/C,MCuBqB,CJgBnB,AIhBE;AJkBF,AFXJ,AK5BE,APUJ,AMsBG,AEVI,KFCE,GNbT,CEkBO,IK5BE,APUT,AQUM,CNQJ,EFlBF,CEkBe,CAAC,CMNH,CDtBT,CAAa,APUjB,EEkBE,EEWiB,IAAb,CGvCF,EHuCsB,CGvCG,IHuCE,QAAzB,kyBGvCF;AHwCE,AFVJ,AKVE,ADcK,AEXD,QNOF,KKVG,ILUM,KIIN,CJJH,EEUa,AGpBf,GLUsB,AKVF,GLUlB,AIIG,CAAA,CCdoB,ACGJ,ENOQ,CEU3B,GAA2B,CFVK,AKVd,CAAa,CCGZ,EJiBa,GEN7B,EFMH,AFV2B,CII/B,GEXuB,CNO2B,AMN1C,CNMR,EAAqD,CKVnD,EDcqB,QAAvB,EAA+C,EEVvC,cAAA,CAAK,SADU,EAEf,kBAAA,cAAA,CAAK,GAFU,EAGf,kBAAA,cAAA,CAAK,KAHU,EAIf,kBAAA,cAAA,CAAK,WAJU,EAKf,IALe,CAKV,UAAA,QAAA,EAAQ;AJalB,AFVD,AKVA,ADcA,AENM,YNEA,AIIF,CCdC,ADcL,MCdA,GAAc,ELUI,GKVC,CLUG,AMFR,INEI,CAAS,CAAT,CAAlB,CMFM,GDRQ,CAAkB,iBAAhC;AHsBA,AFXA,AKVA,ADcA,AENM,YJaF,CGrBC,ADcA,IFOI,AGrBT,ADcS,CJJC,AIIV,ECdY,ADcA,IFOR,AEPY,CFOC,AGrBA,ICQF,ENEf,CAAwB,CIIC,EFOrB,EFXyB,AKVjB,ACQN,CDRwB,ACQN,CFMxB,CFOgC,CEPC,CJJjC,CMFM,CFMN,EAAsC,IFOlC,IAA0C,EGrB9C,GHqBmD,OAAL,CAAa,QAAb,KAA0B,QAAxE,EAAkF;AAChF,AFXF,AKVA,ADcE,AENI,YNEA,CKVD,GHqBG,AEPA,GJJK,EKVb,GLUkB,AKVF,EDcE,CENL,CJaO,CFXP,AKVQ,CLUG,CAAC,EKVT,CAAW,CDcA,CAAT,AENL,CFMX,EFO6B,EFXI,MMFtB,CNEY,AMFA,GDRT,CAA8B,CLUC,CMFhB,EJaX,CAA8B,AFXC,GMFtC,CNEkC,CMFR,ENEmB,MKV1C,ACQH,CNEkC,AKVmB,ACQ5D,ENEkB,CEWJ,CAAiD,EFXE,IAA/C,GAAsD,EAAjE,CAAb,CKVA,GHqBE;AACA,AFXF,AKVA,ADcE,AENG,YNEC,CKVD,GDcC,CEfe,CAAjB,GFeO,CFOC,AFXI,GKVhB,CHqBE,AEPc,ECdI,CHqBD,IFXQ,AKVF,CDcd,CAAc,EFOvB,AGrBkB,CAAW,GDc7B,EAA+B,EJJjB,GAA0B,MKVtB,CAA6B,ULUjD,MKVA;AHsBE,AFVF,AKVA,ADaI,AEND,aDPE,GLUG,IAAR,AKVA,CLUa,AKVA,ADaJ,CFOG,GGpBZ,QHoBE,CEPE,CAAmB,CFOG,MEPtB,KFOsB,GFVc,IEUd,CAAQ,EFVrB,GEU0B,AFVQ,GEUb,EAAR,EAAoB,IAAI,GFVrC,CEUiC,CAAS,CFVO,IAAjD,GAAqD,EEUpB,CAApB,CAAxB,KFVW,IAA+D,SAAS,CAAT,GAAa,EAAb,GAAkB,GAAjF,IAAoF,GAAjG;AEWC,AFVF,AKTC,ADYI,AENF,aDNG,MCMI,EDNT,CAAc,YCMU,IDNxB,ACMS,CDNsB,ACMF,ODN7B,EAAwC,CCMX,IDNgB,GCMhB,EAAO,MDNpC;AHqBA,AFXH,AKTG,ADYG,AENC,YJcA,CGpBC,IHoBI,AGpBT,CAAU,MHoBN,CAAa,AIdJ,SJcT,AGpBJ,CAA2B,GCMvB,CJc2B,AIdJ,IDN3B,EAAqC,CCMjC,EJcJ,EAA0C,AGpBA,YAA1C;AHqBE,AFVN,AKVG,ADYG,AENE,SNIR,OEUY,CERD,GJFX,CAAqB,EEUF,EERb,CAAc,CAAd,EJFN,AIEuB,EJFgB,GEUT,EIdF,GFMtB,CAA4B,CEN1B,MFMF,GFQA;AACA,AFVJ,AKTO,ADWJ,AENE,QNIC,KMPK,CAAP,CNOS,EEUJ,OFVa,AKTf,EHmBH,GAAiB,EFVR,CAAiB,CKTvB,CAAA,CLSM,CAAqB,EEU9B,GGnBG,CLSM,CAAb,CKTA,UAAe,IAAf,EAAgC;AHoB5B,AFVJ,AKTE,ADWA,AENC,QNIC,KKTG,EDWE,EFQA,AFVI,AKTX,EDWW,CCXC,CLSd,EAAmB,CKTjB,ADWgB,MFQd,EERS,CAAc,MAAzB,EAAiC,GAAjC,EAAsC;AFSrC,AFVD,AKTA,ADWE,AELF,aDNK,ELSE,AMHA,CNGP,CIEO,MELA,CFKL,CCXF,ADWe,CCXG,ECMX,GAAQ,IAAR,CFKL,AELkB,CDNpB,ADW2B,GCXK,EDWA,KCXO,CCMnB,CFKO,CAAa,MCXR,GAAmB,ODWjD,aCXF;AHqBA,AFXD,AKTC,ADWC,AENyB,aJerB,AGpBA,MCKqB,CJe1B,GAAe,EGpBf,CAAkB,ECKQ,EJe1B,IGpBA,ECK0B,CDLG,CAAC,ACKJ,CDLK,IAA/B;AHqBD,AFXD,AKRE,ADUA,AEPoC,KJpB/B,GFyBD,CMLG,EAA+B,CDHlC,CDUC,EEPE,CNKK,AKRZ,ACG2C,EDHjC,ADUV,GAAa,KEP8B,CAAA,EAAC,CFOtB,MAAtB,gBJFgD,IAApC,CAAyC,IAAzC,CAAd;AEaO,AFZP,AKRI,ADUF,AEPE,QNKA,KIEG,ICVE,CLQK,CMLH,CAAP,CJiBG,CFZP,EAAoB,AIElB,KCVE,CHoBG,AGpBe,CHoBf,GGpBH,GAAyB,KAAK,GHoB3B,GAAP,EGpBI,QHoBkB,WAAtB,EAAgD;AAC9C,AFZA,AKRE,ADUF,AEPE,YJiBE,EEVJ,CJFO,CAAP,CEYS,AGpBF,ICGI,EDHT,CAAY,GAAZ,ADUF,CFUI,AIjBF,CAAiB,CDHC,GHoBK,AIjBvB,GDHwB,KAAK,GHoB/B,EAAsC,AGpBpC;AHqBA,AFZH,AKRG,ADUH,AEPG,KFTG,YCME,MAAL,CAAY,GAAZ,GAAkB,ECGE,GDHG,ICGvB,CAA4B,IAA5B,CDHkB,GAAkB,WAApC;AHqBD,AFZH,AKRG,ADWK,AERL,SDPD,ACGO,CAAP,CNSK,CAAC,GKRC,GLQK,CAAN,CAAR,EIGQ,SAAA,CAAA,WAAA,GAAR,YAAA;AFUE,AFZH,AKRK,ADWF,AERD,KA5BD,QJ6CO,AETA,ICXE,OHoBP,AETA,CAAiB,EFSE,EGpBjB,CAAkB,MDWpB,EFSA,CETkC,KAAK,CCXrC,CAAkC,GDWF,GCXhC,ADW0C,UAAV,IAAqB,KAAK,KAAL,KAAe,CAAf,GAAmB,EAAnB,GAAwB,GAA7C,CAAlC;AFWA,AFZJ,AKTM,ADWH,AEPD,KFKQ,GELF,CNKR,GEYQ,KAAK,AGrBF,GLSX,CAAqB,EKTf,CHqBE,AGrBU,CHqBG,EGrBf,CLSN,CEYQ,CAAkB,AFZW,AKTb,ACIM,IAAI,CJiB1B,KAA4B,EGrB9B,GHqBmC,WAArC,EAAkD,AIjBpB,mBAAJ,CAAwB,IAAxB,EAA8B,MAA9B,CAA5B;AJkBI,AFZJ,AKTI,ADWN,AEPE,WNKO,AIET,EEPW,IJiBA,AFZI,AKTJ,GCIT,CAAiB,EDJb,CHqBA,AFZG,AKTS,CHqBC,CFZK,CKTlB,CDWN,EJFS,AKTe,CLSK,CML3B,CAA6B,CJiBzB,CAAuB,GAAvB,CAA2B,EFZJ,OKTvB,CLSuB,EAAQ,EEY/B,AIjB6C,OAAjD;AJkBG,AFZD,AKTE,ADpEN,AEwEE,CFxEF,EAAA,MFuFI,CIfF,ENKM,GEYG,EGrBA,ILSM,EMLf,EDJI,CAAc,CLSZ,KAAoB,EKTtB,CLSF,EAA6B,AKTF,IAAzB;AHsBA,AFZA,AKTD,ADrEQ,AEyEZ,QFzEY,SF0FF,GFZL,IEYA,CAAa,AFZb,AI9EO,CJ8ED,EI9EC,GJ8EP,GEYA,AFZc,CEYS,GFZvB,GEYA,CAA8B,GE1FvB,WF0FP;AACD,AFZA,AKTF,ACKH,KDpBS,YCoBQ,eAAjB,EAAkC,SAAA,kBAAA,GAAA;AJiB/B,AFZC,AKRK,ACIP,KJKO,OFDD,SAAS,GKRR,ACIa,GNId,KAAoB,CKRnB,CAAA,CLQL,EAA6B,EKRxB,ACIP,EAAqC,CDJrC,YAAA,KCIA;AJkBQ,AFbJ,AKRF,ACIF,aDJO,ACIE,QJiBD,AFbK,AKRX,CAAc,GLQZ,CMJJ,CDJE,ACIqB,CNIH,EEaZ,AGrBgB,CHqBhB,CFbJ,AKRF,CLQuB,KMJzB,EAAqC,GNIZ,CEajB,GAAR,AFbyB,EAAI,SMJ7B,CJiBA,AIjBwD,YAAxD,EAAsE,gHAEtB,kBAAA,cAAA,CAAK,KAFiB,GAEZ,GAFY,GAER,kBAAA,cAAA,CAAK,IAFG,GAEC,8RAFvE;AJkBE,AFbI,AKRL,ACWF,CAVD,IDHS,OHuBC,QAAQ,AFbN,KEaW,AFbN,OEaC,AFbN,CEamB,IFbF,YEaX,CAA+B,gBAA/B,CAAiD,UFb3D,EAA+D,IEarD,CAAkE,GAAlE,CAAd;AACA,AFbM,AKkBV,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","file":"utterances.4e640b11.map","sourcesContent":["export function deparam(query: string): { [name: string]: string; } {\n  let match: RegExpExecArray | null;\n  const plus = /\\+/g;\n  const search = /([^&=]+)=?([^&]*)/g;\n  const decode = (s: string) => decodeURIComponent(s.replace(plus, ' '));\n  const params: { [name: string]: string; } = {};\n  // tslint:disable-next-line:no-conditional-assignment\n  while (match = search.exec(query)) {\n    params[decode(match[1])] = decode(match[2]);\n  }\n  return params;\n}\n\nexport function param(obj: any) {\n  const parts = [];\n  for (const name in obj) {\n    if (obj.hasOwnProperty(name)) {\n      parts.push(`${encodeURIComponent(name)}=${encodeURIComponent(obj[name])}`);\n    }\n  }\n  return parts.join('&');\n}\n","export default /^([a-z][\\w-]+)\\/([\\w-.]+)$/i;\n","import { deparam } from './deparam';\nimport repoRegex from './repo-regex';\n\nfunction readPageAttributes() {\n  const params = deparam(location.search.substr(1));\n\n  let issueTerm: string | null = null;\n  let issueNumber: number | null = null;\n  if ('issue-term' in params) {\n    issueTerm = params['issue-term'];\n    if (issueTerm !== undefined) {\n      if (issueTerm === '') {\n        throw new Error('When issue-term is specified, it cannot be blank.');\n      }\n      if (['title', 'url', 'pathname'].indexOf(issueTerm) !== -1) {\n        issueTerm = params[issueTerm];\n      }\n    }\n  } else if ('issue-number' in params) {\n    issueNumber = +params['issue-number'];\n    if (issueNumber.toString(10) !== params['issue-number']) {\n      throw new Error(`issue-number is invalid. \"${params['issue-number']}`);\n    }\n  } else {\n    throw new Error('\"issue-term\" or \"issue-number\" must be specified.');\n  }\n\n  if (!('repo' in params)) {\n    throw new Error('\"repo\" is required.');\n  }\n\n  if (!('origin' in params)) {\n    throw new Error('\"origin\" is required.');\n  }\n\n  const matches = repoRegex.exec(params.repo);\n  if (matches === null) {\n    throw new Error(`Invalid repo: \"${params.repo}\"`);\n  }\n\n  return {\n    owner: matches[1],\n    repo: matches[2],\n    branch: 'branch' in params ? params.branch : 'master',\n    configPath: 'config-path' in params ? params['config-path'] : 'utterances.json',\n    issueTerm,\n    issueNumber,\n    origin: params.origin,\n    url: params.url,\n    title: params.title,\n    description: params.description\n  };\n}\n\nexport const pageAttributes = readPageAttributes();\n","// export const UTTERANCES_API = 'http://localhost:5000';\nexport const UTTERANCES_API = 'https://utterances-oauth2.azurewebsites.net';\n","import { UTTERANCES_API } from './utterances-api';\nimport { param } from './deparam';\n\nconst authorizeUrl = `${UTTERANCES_API}/authorize`;\nconst tokenUrl = `${UTTERANCES_API}/token`;\n// tslint:disable-next-line:variable-name\nconst redirect_uri = `${location.origin}/authorized.html`;\n\nclass Token {\n  private readonly storageKey = 'OAUTH_TOKEN2';\n  private token: string | null = null;\n\n  constructor() {\n    try {\n      this.token = localStorage.getItem(this.storageKey);\n      // tslint:disable-next-line:no-empty\n    } catch (e) { }\n  }\n\n  get value() {\n    return this.token;\n  }\n  set value(newValue) {\n    this.token = newValue;\n    try {\n      if (newValue === null) {\n        localStorage.removeItem(this.storageKey);\n      } else {\n        localStorage.setItem(this.storageKey, newValue);\n      }\n      // tslint:disable-next-line:no-empty\n    } catch (e) { }\n  }\n}\n\nexport const token = new Token();\n\nexport function login() {\n  window.open(`${authorizeUrl}?${param({ redirect_uri })}`);\n  return new Promise(resolve => (window as any).notifyAuthorized = resolve)\n    .then(() => fetch(tokenUrl, { mode: 'cors', credentials: 'include' }))\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response.text().then(text => Promise.reject(`Error retrieving token:\\n${text}`));\n    })\n    .then(t => { token.value = t; }, reason => { token.value = null; throw reason; });\n}\n","declare function escape(str: string): string;\n\nexport function decodeBase64UTF8(encoded: string) {\n  encoded = encoded.replace(/\\s/g, '');\n  return decodeURIComponent(escape(atob(encoded)));\n}\n","import { token } from './oauth';\nimport { decodeBase64UTF8 } from './encoding';\nimport { UTTERANCES_API } from './utterances-api';\n\nconst GITHUB_API = 'https://api.github.com/';\nconst GITHUB_ENCODING__HTML_JSON = 'application/vnd.github.VERSION.html+json';\nconst GITHUB_ENCODING__HTML = 'application/vnd.github.VERSION.html';\nconst GITHUB_ENCODING__REACTIONS_PREVIEW = 'application/vnd.github.squirrel-girl-preview';\nconst PAGE_SIZE = 100;\n\nlet owner: string;\nlet repo: string;\nlet branch: string;\n\nexport function setRepoContext(context: { owner: string; repo: string; branch: string; }) {\n  owner = context.owner;\n  repo = context.repo;\n  branch = context.branch;\n}\n\nfunction githubRequest(relativeUrl: string, init?: RequestInit) {\n  init = init || {};\n  init.mode = 'cors';\n  init.cache = 'no-cache'; // force conditional request\n  const request = new Request(GITHUB_API + relativeUrl, init);\n  request.headers.set('Accept', GITHUB_ENCODING__REACTIONS_PREVIEW);\n  if (!/^search\\//.test(relativeUrl) && token.value !== null) {\n    request.headers.set('Authorization', `token ${token.value}`);\n  }\n  return request;\n}\n\nconst rateLimit = {\n  standard: {\n    limit: Number.MAX_VALUE,\n    remaining: Number.MAX_VALUE,\n    reset: 0\n  },\n  search: {\n    limit: Number.MAX_VALUE,\n    remaining: Number.MAX_VALUE,\n    reset: 0\n  }\n};\n\nfunction processRateLimit(response: Response) {\n  const limit = response.headers.get('X-RateLimit-Limit') as string;\n  const remaining = response.headers.get('X-RateLimit-Remaining') as string;\n  const reset = response.headers.get('X-RateLimit-Reset') as string;\n\n  const isSearch = /\\/search\\//.test(response.url);\n  const rate = isSearch ? rateLimit.search : rateLimit.standard;\n\n  rate.limit = +limit;\n  rate.remaining = +remaining;\n  rate.reset = +reset;\n\n  if (response.status === 403 && rate.remaining === 0) {\n    const resetDate = new Date(0);\n    resetDate.setUTCSeconds(rate.reset);\n    const mins = Math.round((resetDate.getTime() - new Date().getTime()) / 1000 / 60);\n    const apiType = isSearch ? 'search API' : 'non-search APIs';\n    // tslint:disable-next-line:no-console\n    console.warn(`Rate limit exceeded for ${apiType}. Resets in ${mins} minute${mins === 1 ? '' : 's'}.`);\n  }\n}\n\nfunction readRelNext(response: Response) {\n  const link = response.headers.get('link');\n  if (link === null) {\n    return 0;\n  }\n  const match = /\\?page=([2-9][0-9]*)>; rel=\"next\"/.exec(link);\n  if (match === null) {\n    return 0;\n  }\n  return +match[1];\n}\n\nfunction githubFetch(request: Request): Promise<Response> {\n  return fetch(request).then(response => {\n    if (response.status === 401) {\n      token.value = null;\n    }\n    if (response.status === 403) {\n      response.json().then(data => {\n        if (data.message === 'Resource not accessible by integration') {\n          window.dispatchEvent(new CustomEvent('not-installed'));\n        }\n      });\n    }\n\n    processRateLimit(response);\n\n    if (request.method === 'GET' && [401, 403].indexOf(response.status) !== -1) {\n      request.headers.delete('Authorization');\n      return githubFetch(request);\n    }\n    return response;\n  });\n}\n\nexport function loadJsonFile<T>(path: string, html = false) {\n  const request = githubRequest(`repos/${owner}/${repo}/contents/${path}?ref=${branch}`);\n  if (html) {\n    request.headers.set('accept', GITHUB_ENCODING__HTML);\n  }\n  return githubFetch(request).then<FileContentsResponse | string>(response => {\n    if (response.status === 404) {\n      throw new Error(`Repo \"${owner}/${repo}\" does not have a file named \"${path}\" in the \"${branch}\" branch.`);\n    }\n    if (!response.ok) {\n      throw new Error(`Error fetching ${path}.`);\n    }\n    return html ? response.text() : response.json();\n  }).then<T>(file => {\n    if (html) {\n      return file;\n    }\n    const { content } = file as FileContentsResponse;\n    const decoded = decodeBase64UTF8(content);\n    return JSON.parse(decoded);\n  });\n}\n\nexport function loadIssueByTerm(term: string) {\n  const q = `\"${term}\" type:issue in:title repo:${owner}/${repo}`;\n  const request = githubRequest(`search/issues?q=${encodeURIComponent(q)}&sort=created&order=asc`);\n  return githubFetch(request).then<IssueSearchResponse>(response => {\n    if (!response.ok) {\n      throw new Error('Error fetching issue via search.');\n    }\n    return response.json();\n  }).then(results => {\n    if (results.total_count === 0) {\n      return null;\n    }\n    if (results.total_count > 1) {\n      // tslint:disable-next-line:no-console\n      console.warn(`Multiple issues match \"${q}\". Using earliest created.`);\n    }\n    return results.items[0];\n  });\n}\n\nexport function loadIssueByNumber(issueNumber: number) {\n  const request = githubRequest(`repos/${owner}/${repo}/issues/${issueNumber}`);\n  return githubFetch(request).then<Issue>(response => {\n    if (!response.ok) {\n      throw new Error('Error fetching issue via issue number.');\n    }\n    return response.json();\n  });\n}\n\nfunction commentsRequest(issueNumber: number, page: number) {\n  const url = `repos/${owner}/${repo}/issues/${issueNumber}/comments?page=${page}&per_page=${PAGE_SIZE}`;\n  const request = githubRequest(url);\n  const accept = `${GITHUB_ENCODING__HTML_JSON},${GITHUB_ENCODING__REACTIONS_PREVIEW}`;\n  request.headers.set('Accept', accept);\n  return request;\n}\n\nexport function loadCommentsPage(issueNumber: number, page: number) {\n  const request = commentsRequest(issueNumber, page);\n  return githubFetch(request).then(response => {\n    if (!response.ok) {\n      throw new Error('Error fetching comments.');\n    }\n    const nextPage = readRelNext(response);\n    return response.json()\n      .then<CommentsPage>((items: IssueComment[]) => ({ items, nextPage }));\n  });\n}\n\nexport function loadUser(): Promise<User | null> {\n  if (token.value === null) {\n    return Promise.resolve(null);\n  }\n  return githubFetch(githubRequest('user'))\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return null;\n    });\n}\n\nexport function createIssue(issueTerm: string, documentUrl: string, title: string, description: string) {\n  const request = new Request(`${UTTERANCES_API}/repos/${owner}/${repo}/issues`, {\n    method: 'POST',\n    body: JSON.stringify({\n      title: issueTerm,\n      body: `# ${title}\\n\\n${description}\\n\\n[${documentUrl}](${documentUrl})`\n    })\n  });\n  request.headers.set('Accept', GITHUB_ENCODING__REACTIONS_PREVIEW);\n  request.headers.set('Authorization', `token ${token.value}`);\n  return fetch(request).then<Issue>(response => {\n    if (!response.ok) {\n      throw new Error('Error creating comments container issue');\n    }\n    return response.json();\n  });\n}\n\nexport function postComment(issueNumber: number, markdown: string) {\n  const url = `repos/${owner}/${repo}/issues/${issueNumber}/comments`;\n  const body = JSON.stringify({ body: markdown });\n  const request = githubRequest(url, { method: 'POST', body });\n  const accept = `${GITHUB_ENCODING__HTML_JSON},${GITHUB_ENCODING__REACTIONS_PREVIEW}`;\n  request.headers.set('Accept', accept);\n  return githubFetch(request).then<IssueComment>(response => {\n    if (!response.ok) {\n      throw new Error('Error posting comment.');\n    }\n    return response.json();\n  });\n}\n\ninterface IssueSearchResponse {\n  total_count: number;\n  incomplete_results: boolean;\n  items: Issue[];\n}\n\nexport interface User {\n  login: string;\n  id: number;\n  avatar_url: string;\n  gravatar_id: string;\n  url: string;\n  html_url: string;\n  followers_url: string;\n  following_url: string;\n  gists_url: string;\n  starred_url: string;\n  subscriptions_url: string;\n  organizations_url: string;\n  repos_url: string;\n  events_url: string;\n  received_events_url: string;\n  type: string;\n}\n\nexport type CommentAuthorAssociation =\n  'COLLABORATOR'\n  | 'CONTRIBUTOR'\n  | 'FIRST_TIMER'\n  | 'FIRST_TIME_CONTRIBUTOR'\n  | 'MEMBER'\n  | 'NONE'\n  | 'OWNER';\n\nexport interface Issue {\n  url: string;\n  repository_url: string;\n  labels_url: string;\n  comments_url: string;\n  events_url: string;\n  html_url: string;\n  id: number;\n  number: number;\n  title: string;\n  user: User;\n  locked: boolean;\n  labels: {\n    url: string;\n    name: string;\n    color: string;\n  }[];\n  state: string;\n  assignee: null; // todo,\n  milestone: null; // todo,\n  comments: number;\n  created_at: string;\n  updated_at: string;\n  closed_at: null; // todo,\n  pull_request: {\n    html_url: null; // todo,\n    diff_url: null; // todo,\n    patch_url: null; // todo\n  };\n  body: string;\n  score: number;\n  reactions: {\n    total_count: number;\n    '+1': number;\n    '-1': number;\n    laugh: number;\n    confused: number;\n    heart: number;\n    hooray: number;\n    url: string;\n  };\n  author_association: CommentAuthorAssociation;\n}\n\ninterface FileContentsResponse {\n  type: string;\n  encoding: string;\n  size: number;\n  name: string;\n  path: string;\n  content: string;\n  sha: string;\n  url: string;\n  git_url: string;\n  html_url: string;\n  download_url: string;\n}\n\nexport interface IssueComment {\n  id: number;\n  url: string;\n  html_url: string;\n  body_html: string;\n  user: User;\n  created_at: string;\n  updated_at: string;\n  author_association: CommentAuthorAssociation;\n}\n\nexport interface CommentsPage {\n  items: IssueComment[];\n  nextPage: number;\n}\n\n/*\nquery IssueComments($owner: String!, $repo: String!, $issueQuery: String!) {\n  search(query: $issueQuery, type: ISSUE, first: 1) {\n    issueCount\n    edges {\n      node {\n        ... on Issue {\n          id\n          title,\n          comments(first: 100) {\n          \ttotalCount\n            edges {\n              node {\n                id,\n                createdAt,\n                bodyHTML,\n                author {\n                  avatarUrl,\n                  login\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  rateLimit {\n    cost\n    limit\n    remaining\n    resetAt\n  }\n\n  repository(owner: $owner, name: $repo) {\n    object(expression: \"master:utterances.json\") {\n      ... on Blob {\n        text\n      }\n    }\n  }\n}\n\n{\n  \"issueQuery\": \"user:jdanyow repo:utterances-demo debug\",\n  \"owner\": \"jdanyow\",\n  \"repo\": \"utterances-demo\"\n}\n*/\n","// todo: take a dependency on some relative time library.\n\nconst thresholds = [\n  1000, 'second',\n  1000 * 60, 'minute',\n  1000 * 60 * 60, 'hour',\n  1000 * 60 * 60 * 24, 'day',\n  1000 * 60 * 60 * 24 * 7, 'week',\n  1000 * 60 * 60 * 24 * 27, 'month'\n];\n\nconst formatOptions: Intl.DateTimeFormatOptions = { month: 'short', day: 'numeric', year: 'numeric' };\n\nexport function timeAgo(current: number, value: Date) {\n  const elapsed = current - value.getTime();\n  if (elapsed < 5000) {\n    return 'just now';\n  }\n  let i = 0;\n  while (i + 2 < thresholds.length && elapsed * 1.1 > thresholds[i + 2]) {\n    i += 2;\n  }\n\n  const divisor = thresholds[i] as number;\n  const text = thresholds[i + 1] as string;\n  const units = Math.round(elapsed / divisor);\n\n  if (units > 3 && i === thresholds.length - 2) {\n    return `on ${value.toLocaleDateString(undefined, formatOptions)}`;\n  }\n  return units === 1 ? `${text === 'hour' ? 'an' : 'a'} ${text} ago` : `${units} ${text}s ago`;\n}\n","import { IssueComment } from './github';\nimport { timeAgo } from './time-ago';\n\nconst avatarArgs = '?v=3&s=88';\nconst displayAssociations: { [association: string]: string; } = {\n  COLLABORATOR: 'Collaborator',\n  CONTRIBUTOR: 'Contributor',\n  MEMBER: 'Member',\n  OWNER: 'Owner'\n};\n\nexport class CommentComponent {\n  public readonly element: HTMLElement;\n\n  constructor(\n    public comment: IssueComment,\n    private currentUser: string | null\n  ) {\n    const { user, html_url, created_at, body_html, author_association } = comment;\n    this.element = document.createElement('article');\n    this.element.classList.add('timeline-comment');\n    if (user.login === currentUser) {\n      this.element.classList.add('current-user');\n    }\n    const association = displayAssociations[author_association];\n    this.element.innerHTML = `\n      <a class=\"avatar\" href=\"${user.html_url}\" target=\"_blank\">\n        <img alt=\"@${user.login}\" height=\"44\" width=\"44\"\n              src=\"${user.avatar_url}${avatarArgs}\">\n      </a>\n      <div class=\"comment\">\n        <header class=\"comment-header\">\n          <span class=\"comment-meta\">\n            <a class=\"text-link\" href=\"${user.html_url}\" target=\"_blank\"><strong>${user.login}</strong></a>\n            commented\n            <a class=\"text-link\" href=\"${html_url}\" target=\"_blank\">${timeAgo(Date.now(), new Date(created_at))}</a>\n          </span>\n          ${association ? `<span class=\"author-association-badge\">${association}</span>` : ''}\n        </header>\n        <div class=\"markdown-body\">\n          ${body_html}\n        </div>\n      </div>`;\n\n    this.retargetLinks();\n  }\n\n  public setComment(comment: IssueComment) {\n    const commentDiv = this.element.lastElementChild as HTMLDivElement;\n    const { user, html_url, created_at, body_html } = comment;\n\n    if (this.comment.user.login !== user.login) {\n      if (user.login === this.currentUser) {\n        this.element.classList.add('current-user');\n      } else {\n        this.element.classList.remove('current-user');\n      }\n\n      const avatarAnchor = this.element.firstElementChild as HTMLAnchorElement;\n      const avatarImg = avatarAnchor.firstElementChild as HTMLImageElement;\n      avatarAnchor.href = user.html_url;\n      avatarImg.alt = '@' + user.login;\n      avatarImg.src = user.avatar_url + avatarArgs;\n\n      const authorAnchor = commentDiv\n        .firstElementChild!.firstElementChild as HTMLAnchorElement;\n      authorAnchor.href = user.html_url;\n      authorAnchor.textContent = user.login;\n    }\n\n    if (this.comment.created_at !== created_at || this.comment.html_url !== html_url) {\n      const timestamp = commentDiv.firstElementChild!.firstElementChild!.lastElementChild as HTMLAnchorElement;\n      timestamp.href = html_url;\n      timestamp.textContent = timeAgo(Date.now(), new Date(created_at));\n    }\n\n    if (this.comment.body_html !== body_html) {\n      const body = commentDiv.lastElementChild as HTMLDivElement;\n      body.innerHTML = body_html;\n      this.retargetLinks();\n    }\n\n    this.comment = comment;\n  }\n\n  public setCurrentUser(currentUser: string | null) {\n    if (this.currentUser === currentUser) {\n      return;\n    }\n    this.currentUser = currentUser;\n\n    if (this.comment.user.login === this.currentUser) {\n      this.element.classList.add('current-user');\n    } else {\n      this.element.classList.remove('current-user');\n    }\n  }\n\n  private retargetLinks() {\n    const links = this.element.lastElementChild!.lastElementChild!.querySelectorAll('a');\n    let j = links.length;\n    while (j--) {\n      const link = links.item(j);\n      link.target = '_blank';\n    }\n  }\n\n  // private fallbackEmoji() {\n  //   const emojis = this.element.lastElementChild!.lastElementChild!.querySelectorAll('g-emoji');\n  //   let i = emojis.length;\n  //   while (i--) {\n  //     const emoji = emojis.item(i);\n  //     emoji.innerHTML = '';\n  //     const img = document.createElement('img');\n  //     img.classList.add('emoji');\n  //     img.alt = emoji.getAttribute('alias') as string;\n  //     img.height = 20;\n  //     img.width = 20;\n  //     img.src = emoji.getAttribute('fallback-src') as string;\n  //     emoji.appendChild(img);\n  //   }\n  // }\n}\n","export interface ResizeMessage {\n  type: 'resize';\n  height: number;\n}\n\nlet hostOrigin: string;\n\nexport function setHostOrigin(origin: string) {\n  hostOrigin = origin;\n  addEventListener('resize', publishResize);\n}\n\nlet lastHeight = -1;\n\nexport function publishResize() {\n  const height = document.body.scrollHeight;\n  if (height === lastHeight) {\n    return;\n  }\n  lastHeight = height;\n  const message: ResizeMessage = { type: 'resize', height };\n  parent.postMessage(message, hostOrigin);\n}\n","import { User, Issue, IssueComment } from './github';\nimport { CommentComponent } from './comment-component';\nimport { publishResize } from './bus';\n\nexport class TimelineComponent {\n  public readonly element: HTMLElement;\n  private readonly timeline: CommentComponent[] = [];\n  private readonly countAnchor: HTMLAnchorElement;\n  private readonly marker: Node;\n  private count: number = 0;\n\n  constructor(\n    private user: User | null,\n    private issue: Issue | null\n  ) {\n    this.element = document.createElement('section');\n    this.element.classList.add('timeline');\n    this.element.innerHTML = `\n      <h1 class=\"timeline-header\">\n        <a class=\"text-link\" target=\"_blank\"></a>\n        <em>\n          - powered by\n          <a class=\"text-link\" href=\"https://utteranc.es\" target=\"_blank\">utteranc.es</a>\n        </em>\n      </h1>`;\n    this.countAnchor = this.element.firstElementChild!.firstElementChild as HTMLAnchorElement;\n    this.marker = document.createComment('marker');\n    this.element.appendChild(this.marker);\n    this.setIssue(this.issue);\n    this.renderCount();\n  }\n\n  public setUser(user: User | null) {\n    this.user = user;\n    const login = user ? user.login : null;\n    for (let i = 0; i < this.timeline.length; i++) {\n      this.timeline[i].setCurrentUser(login);\n    }\n    publishResize();\n  }\n\n  public setIssue(issue: Issue | null) {\n    this.issue = issue;\n    if (issue) {\n      this.countAnchor.href = issue.html_url;\n    } else {\n      this.countAnchor.removeAttribute('href');\n    }\n  }\n\n  public appendComment(comment: IssueComment) {\n    const component = new CommentComponent(\n      comment,\n      this.user ? this.user.login : null);\n    this.timeline.push(component);\n    this.element.insertBefore(component.element, this.marker);\n    this.count++;\n    this.renderCount();\n    publishResize();\n  }\n\n  public replaceComments(comments: IssueComment[]) {\n    let i;\n    for (i = 0; i < comments.length; i++) {\n      const comment = comments[i];\n      if (i <= this.timeline.length) {\n        this.appendComment(comment);\n        continue;\n      }\n      this.timeline[i].setComment(comment);\n    }\n    for (; i < this.timeline.length; i++) {\n      this.element.removeChild(this.element.lastElementChild!);\n    }\n    this.count = comments.length;\n    this.renderCount();\n    publishResize();\n  }\n\n  private renderCount() {\n    this.countAnchor.textContent = `${this.count} Comment${this.count === 1 ? '' : 's'}`;\n  }\n}\n","import { User } from './github';\nimport { publishResize } from './bus';\n\n// tslint:disable-next-line:max-line-length\nconst anonymousAvatar = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 16\" version=\"1.1\"><path fill=\"rgb(179,179,179)\" fill-rule=\"evenodd\" d=\"M8 10.5L9 14H5l1-3.5L5.25 9h3.5L8 10.5zM10 6H4L2 7h10l-2-1zM9 2L7 3 5 2 4 5h6L9 2zm4.03 7.75L10 9l1 2-2 3h3.22c.45 0 .86-.31.97-.75l.56-2.28c.14-.53-.19-1.08-.72-1.22zM4 9l-3.03.75c-.53.14-.86.69-.72 1.22l.56 2.28c.11.44.52.75.97.75H5l-2-3 1-2z\"></path></svg>`;\n// base64 encoding works in IE, Edge. UTF-8 does not.\nconst anonymousAvatarUrl = `data:image/svg+xml;base64,${btoa(anonymousAvatar)}`;\n\nexport class NewCommentComponent {\n  public readonly element: HTMLElement;\n\n  private avatarAnchor: HTMLAnchorElement;\n  private avatar: HTMLImageElement;\n  private form: HTMLFormElement;\n  private textarea: HTMLTextAreaElement;\n  private submitButton: HTMLButtonElement;\n\n  private submitting = false;\n\n  constructor(\n    private user: User | null,\n    private readonly submit: (markdown: string) => Promise<void>\n  ) {\n    this.element = document.createElement('article');\n    this.element.classList.add('timeline-comment');\n    this.element.addEventListener('mousemove', publishResize); // todo: measure, throttle\n\n    this.element.innerHTML = `\n      <a class=\"avatar\" target=\"_blank\">\n        <img height=\"44\" width=\"44\">\n      </a>\n      <form class=\"comment\" accept-charset=\"UTF-8\" action=\"javascript:\">\n        <header class=\"comment-header\">\n          <strong>Join the discussion</strong>\n        </header>\n        <div class=\"comment-body\">\n          <textarea placeholder=\"Leave a comment\" aria-label=\"comment\"></textarea>\n        </div>\n        <footer class=\"comment-footer\">\n          <a class=\"text-link markdown-info\" tabindex=\"-1\" target=\"_blank\"\n             href=\"https://guides.github.com/features/mastering-markdown/\">\n            Styling with Markdown is supported\n          </a>\n          <button class=\"btn btn-primary\" type=\"submit\">Comment</button>\n        </footer>\n      </form>`;\n\n    this.avatarAnchor = this.element.firstElementChild as HTMLAnchorElement;\n    this.avatar = this.avatarAnchor.firstElementChild as HTMLImageElement;\n    this.form = this.avatarAnchor.nextElementSibling as HTMLFormElement;\n    this.textarea = this.form!.firstElementChild!.nextElementSibling!.firstElementChild as HTMLTextAreaElement;\n    this.submitButton = this.form!.lastElementChild!.lastElementChild as HTMLButtonElement;\n\n    this.setUser(user);\n\n    this.textarea.addEventListener('input', this.handleInput);\n    this.form.addEventListener('submit', this.handleSubmit);\n  }\n\n  public setUser(user: User | null) {\n    this.user = user;\n    this.submitButton.textContent = user ? 'Comment' : 'Sign in to comment';\n    this.submitButton.disabled = !!user;\n\n    if (user) {\n      this.avatarAnchor.href = user.html_url;\n      this.avatar.alt = '@' + user.login;\n      this.avatar.src = user.avatar_url + '?v=3&s=88';\n    } else {\n      this.avatarAnchor.removeAttribute('href');\n      this.avatar.alt = '@anonymous';\n      this.avatar.src = anonymousAvatarUrl;\n      this.textarea.disabled = true;\n    }\n  }\n\n  public clear() {\n    this.textarea.value = '';\n  }\n\n  private handleInput = () => {\n    this.submitButton.disabled = /^\\s*$/.test(this.textarea.value);\n    if (this.textarea.scrollHeight < 450 && this.textarea.offsetHeight < this.textarea.scrollHeight) {\n      this.textarea.style.height = `${this.textarea.scrollHeight}px`;\n      publishResize();\n    }\n  }\n\n  private handleSubmit = (event: Event) => {\n    event.preventDefault();\n    if (this.submitting) {\n      return;\n    }\n    this.submitting = true;\n    if (this.user) {\n      this.textarea.disabled = true;\n      this.submitButton.disabled = true;\n    }\n    this.submit(this.textarea.value).catch(() => 0).then(() => {\n      this.submitting = false;\n      this.textarea.disabled = !this.user;\n      this.textarea.value = '';\n      this.submitButton.disabled = false;\n    });\n  }\n}\n","import { pageAttributes as page } from './page-attributes';\nimport {\n  Issue,\n  IssueComment,\n  User,\n  setRepoContext,\n  loadIssueByTerm,\n  loadIssueByNumber,\n  loadCommentsPage,\n  loadUser,\n  postComment,\n  createIssue\n} from './github';\nimport { login } from './oauth';\nimport { TimelineComponent } from './timeline-component';\nimport { NewCommentComponent } from './new-comment-component';\nimport { setHostOrigin, publishResize } from './bus';\n\nsetRepoContext(page);\n\nfunction loadIssue(): Promise<Issue | null> {\n  if (page.issueNumber !== null) {\n    return loadIssueByNumber(page.issueNumber);\n  }\n  return loadIssueByTerm(page.issueTerm as string);\n}\n\nPromise.all([loadIssue(), loadUser()])\n  .then(([issue, user]) => bootstrap(issue, user));\n\nfunction bootstrap(issue: Issue | null, user: User | null) {\n  setHostOrigin(page.origin);\n\n  const timeline = new TimelineComponent(user, issue);\n  document.body.appendChild(timeline.element);\n\n  if (issue && issue.comments > 0) {\n    loadCommentsPage(issue.number, 1).then(({ items }) => timeline.replaceComments(items));\n  }\n\n  if (issue && issue.locked) {\n    return;\n  }\n\n  const submit = (markdown: string) => {\n    if (user) {\n      let commentPromise: Promise<IssueComment>;\n      if (issue) {\n        commentPromise = postComment(issue.number, markdown);\n      } else {\n        commentPromise = createIssue(\n          page.issueTerm as string,\n          page.url,\n          page.title,\n          page.description\n        ).then(newIssue => {\n          issue = newIssue;\n          timeline.setIssue(issue);\n          return postComment(issue.number, markdown);\n        });\n      }\n      return commentPromise.then(comment => {\n        timeline.appendComment(comment);\n        newCommentComponent.clear();\n      });\n    }\n\n    return login().then(() => loadUser()).then(u => {\n      user = u;\n      timeline.setUser(user);\n      newCommentComponent.setUser(user);\n    });\n  };\n\n  const newCommentComponent = new NewCommentComponent(user, submit);\n  timeline.element.appendChild(newCommentComponent.element);\n  publishResize();\n}\n\naddEventListener('not-installed', function handleNotInstalled() {\n  removeEventListener('not-installed', handleNotInstalled);\n  document.querySelector('.timeline')!.insertAdjacentHTML('afterbegin', `\n  <div class=\"flash flash-error flash-not-installed\">\n    Error: utterances is not installed on <code>${page.owner}/${page.repo}</code>.\n    If you own this repo,\n    <a href=\"https://github.com/apps/utterances\" target=\"_blank\"><strong>install the app</strong></a>.\n    Read more about this change in\n    <a href=\"https://github.com/utterance/utterances/pull/25\" target=\"_blank\">the PR</a>.\n  </div>`);\n});\n"]}