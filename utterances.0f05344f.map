{"version":3,"sources":["deparam.ts","repo-regex.ts","page-attributes.ts","utterances-api.ts","oauth.ts","encoding.ts","github.ts","time-ago.ts","measure.ts","comment-component.ts","timeline-component.ts","new-comment-component.ts","utterances.ts"],"names":[],"mappings":";;;;;AAAA,SAAA,OAAA,CAAwB,KAAxB,EAAqC;AACnC,ACDF,QDCM,ACDN,KDCE,ECDF,GAAe,6BAAf;ADEE,QAAM,OAAO,KAAb;AACA,QAAM,SAAS,oBAAf;AACA,QAAM,SAAS,SAAT,MAAS,CAAC,CAAD,EAAU;AAAK,AGHnB,QAAA,OHGmB,OGHnB,GAAiB,SHGqB,EAAE,OAAF,CAAU,IAAV,EAAgB,AGHtD,GHGsC,CAAnB,CAAA;AAAwC,AEJxE,IAAA,CFIE,WEJF,QAAA,WAAA,CAAA;AFKE,AILF,AFCA,IEDA,AFCA,IFIQ,SAAsC,EAA5C,AEJF,IEDA,QAAA,IFCA,QAAA,MEDA,CAAA,OFCA,CAAA,CAAA;AFME,AINF,AFEA,IEFA,KFEA,EFIS,KINT,GJMiB,KINjB,EJMwB,CEJxB,GFIiB,AEJjB,CFI6B,IIN7B,CJMiB,AINjB,CJME,EAAmC;AACjC,AKNJ,ADCA,AFCE,IEDI,IFCE,CGFR,MLMW,EEJM,EEDO,GJKN,GKNlB,CAAiC,CHEhB,CFIO,CAAN,CAAP,CAAP,EKNJ,CHEiB,CFIc,AKNiB,AHEvB,CEDD,MJKc,EEJJ,IFIU,CAAN,CAAP,AILP,AFCC,CFIrB,AEJqC,EEDH,IFCb,CAAuB,CAAvB,CAAR,CAAf,IEDF;AJMG,AKND,ADCF,AFEE,IEFI,IFEA,MGHM,CDCQ,KFEa,EGHb,EHGlB,KGHU,CAAgB,EDCR,GCDR,EAAuB,EAAvB,CAAV,MDCkB,GAAc,QAAlC;AJME,AKNA,ACJF,AFMA,AFCE,IIPF,AFMM,IFCA,GFGG,AKNA,GCJT,GNUE,EIJsB,GENxB,AJOmC,IAAjC,EED+B,ECFL,CCJ5B,CAAA,EFMwB,GCFW,ADEI,KCFC,OAAL,CAAP,CAAnB,CAAP,GDEF;AJKC,AKNA,ACJD,AFOA,AFAE,IIPF,AFOA,IFAM,IEAN,KEPA,OFOA,AFAsB,CIPtB,KJOE,EAA4B,KIP9B,CAAA;ANDA,AKEA,ACAA,AFUE,AFHE,AKPJ,IDAA,ACAM,IPFN,AKEA,KDUE,EJZF,EOEmB,CPFnB,AIYE,AGTA,ELMc,CEGd,CGViB,CDAnB,CDAA,AECQ,CPHR,EKEA,AHOuB,IIPvB,CCAmB,EAEjB,KLKc,CAAZ,CKLK,EFFT,AEAmB,EAEN,IDFb,CAAA,GCAmB,EAGjB,OAAO,EAAP,GAAY,EAHK,EAGD,MAHC,EAIjB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAJA,EAII,KAJJ,EAKjB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,CALL,EAKQ,MALR,EAMjB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,EANL,EAMS,OANT,CAAnB;APWA,AMTA,AFKmB,AFCf,AKCJ,IDPM,ACOA,KPEN,GEHQ,CEDW,CJInB,CAAsB,EMTH,CNSnB,EAA8B,AOFoB,EAAE,CHFjC,GAAa,AFCV,GKCqC,MLDvD,CKC8C,CLDjB,CKCmC,EHFjD,EELnB,CCOyE,SAAvB,EAAkC,MAAM,SAAxC,EAAlD;APGE,AMTF,AEAA,AJKU,AFCJ,AKEN,IDRM,AEAF,IRSI,CODR,IHHU,CILV,ERSgB,AEHN,AKEV,CAAwB,CPCtB,AIJQ,GAAuB,GGGjC,CHHU,CGG+B,ILFjB,CKExB,CLFM,CIN6B,ACQiB,CLFxB,yCIN5B;ANUE,AMTF,AECA,AJMI,AFDI,AKEN,IDRI,ICQE,CPCD,AQRP,GJMQ,CJEK,IAAX,CODgB,GPCG,CEHP,CMLd,CRQE,AQR6B,ERQL,AEHR,EINY,ACQF,ECP5B,CNKc,CML+B,ANKrB,EKEU,OAAN,EAA1B,sBDRF,kBJMc,CAAN;AOXR,ATeI,AMTJ,AECE,AJMI,AFDC,AKEL,IEdF,AHMM,ICQA,IPCE,IAAI,CSfZ,ADOe,AJMJ,CGCK,IHDV,AGCJ,CCPA,CDOoB,CEdtB,ALamB,KJEX,CAAmB,IAAnB,CAAJ,CSfJ,CAAA,ATekC,AIFF,GEPW,IFOxB,CAAqB,KAAK,UAA1B,CAAb,yBEPN;AGLA,ATeM,AMTN,AECE,AJOG,AFFC,AKEF,IEdJ,AHMM,KFKF,CAGE,KGAK,CEdX,AHMkB,AJMR,CEEG,AFFF,CFGC,AIDN,CERN,CFQgB,CIPG,AJOA,CJCb,CAAc,CSfpB,APYU,CKEN,CLFgB,GMLlB,EAA2B,ANKnB,EAAiB,EOZ3B,CAAA,MTeuC,CEH7B,EAA6B,CFGnB,AQRlB,IRQ0C,EEHlC,CFGU,AEH2B,GFGC,MEHtC,MAAoD,CAAC,CAAzD,EAA4D,GFGC,IAAI,IAAJ,CAAnB,CAA1C;ASbN,ATcK,AMRL,AEAE,AJOC,AFFK,AKEL,AGhBH,IDGM,AHMF,AITJ,KJSA,QGNmB,IDMA,KETnB,CFSE,CCNF,APWoB,CMLO,KET3B,CRc2B,SMLzB,ANKkB,CAAZ,UQdR,CAAA;ADIA,ATcG,AMRH,AEAC,AJQC,AFHK,AKEL,AGhBF,IDGM,AHMF,AITJ,IJSA,ACOM,GHCJ,CGDQ,CAAR,GGhBF,QAAA,CNiBE,CKd8D,ALc1D,MAAA,GMjBN,CAAA,KNiBE,EAAI,OAAJ,EAAS;AKbT,ATcA,AMRF,AELA,AGPA,ATiBK,AKEH,AGfF,IJQI,AKZJ,ADIA,IFGA,EFKA,CNQS,AODA,EHAP,EOnBF,AJmBa,CAAJ,CPCM,CSdC,CFaC,EPCR,CAAW,AQbpB,CGPA,CDIA,CVgBS,AQbT,CRaE,EIDA,EGA0B,EEdoC,CELhE,CAAA,EJmBS,AGfT,GFGA,CDYsC,UAAU,GAAV,GAAgB,WAAW,IAAI,CAAf,CAApD,EAAuE;AEZvE,ATcD,AMPD,AEDA,AGZA,APmBI,AFFD,AKEC,AGTF,IFEE,AGZJ,CTOE,IIMF,EJIS,EKEA,AGTP,CHSE,CLFS,CSjBb,CFMe,ADME,CAAC,CAAlB,AJOW,IENX,CAA+B,AKb/B,APmBgB,KAAZ,CKf4D,ACM9D,CJGF,AIFY,EJE4E,AJIzD,ESjB/B,ADUE,CCVF,CDYY,ERKH,EAA8B,CQPrC,EAE6B;ADL7B,ATKF,AMEE,AEAF,AGbA,APmBG,AFFC,AKED,AGTS,AEZZ,IDEA,ACFA,IZaA,CQEA,AJIW,GKXD,AHOA,CNFV,AUDY,GVCZ,AQEA,CEHY,EFGZ,CCVgE,AHU9C,AIHN,CVCZ,CEMkB,CAAC,CQPP,AEZZ,CNeE,CKbF,ITiB0B,EUnB1B,EDEA,UTiBmB,CAAf,MUnBJ,CAAA,GDEA,CAAA;AFOE,AHOA,AEAA,AGXF,ATeI,AKGF,AGVU,AEZZ,IDIM,ACJN,IJeQ,ADOA,GEdC,AHOA,CJID,CEEN,AMTU,EEZZ,EJeiB,CDOC,AGVN,CJGK,EIHL,CCRY,CLWtB,AMfF,CVmBoB,EMJM,AJMd,AMTA,GHUiB,CCPZ,ADOC,CCPa,ADO7B,CLHM,CAAqB,AUnB7B,CRqBE,AQrBF,CVmBQ,CEEY,KFFiB,EMJnC,KNI0C,cAAP,CAAjC,EAAyD,qWSf7D;AFAgE,AHY9D,AEAA,AGVF,APgBI,AFFE,AKGJ,AGlBiB,AEOnB,CHRA,GEEM,ACMN,IJIM,ADOE,KDPG,AIXQ,CEOnB,CLWe,EHDN,CFFG,CMJK,EFAE,AIXA,CNiBf,AFFY,AURhB,EFPkD,CCCvB,APgBV,CGCS,AGlBP,CJWjB,AJIU,CAAU,CMJpB,CDO4B,CCPD,ADOd,AKXf,CLWE,AKXF,CRUI,uBOhBoD,ITcL,CSdU,MTcH,SSdF,CAAxD,ITcmD,CAAvC,CAAN;AOTN,AHMC,AEAG,AGTJ,APeI,AFFC,AKGH,AGhBQ,AEKV,IHFA,AEHM,ACKN,ILWQ,KGhBE,GNeF,AGCQ,EGhBN,GHgBW,AGhBK,CAAhB,CDGV,AEHyB,GJgBT,CAAW,AKX3B,QHFA,AGEA,ELWqC,MIhBrC,CJgBgB,CAAd,YKXF,CAAA;AHCE,AHDF,AEKG,AGRH,APcM,AFFH,AKID,AGZE,AEAJ,IDJA,ACIA,CVGS,GIJT,ACaM,GLJG,EORP,ACAO,GHYK,CAAR,GHFI,AMVN,CHYe,CDbnB,CICmB,EJDnB,CKHA,CJgByB,EEZvB,CACS,AGDX,EFA4B,CNUL,IKVrB,ALUI,COdN,AJgBoC,AKZpC,CHEY,AHHZ,AFW6B,KGEJ,CGZN,CAAuB,CHYG,CAA3C,EEZA,AFY8C,EEVV,ACFnB,CAAf,UEAJ,CAAA;AHCW,AHIX,AEAE,AGIA,APEM,AFFJ,AKIA,AGZA,AEAJ,IAAA,KNIA,IGJW,AEQT,ADRO,CRQC,CKIC,CKZX,CJIe,CNID,EORH,ACAP,CAAa,CJIjB,CGJW,AHIY,AEArB,ANIQ,AKIO,CLJG,AURpB,KLYuB,CEZZ,ACAP,CAAuB,CCQzB,CACU,APCS,CENrB,AIJI,CAA2B,AEA/B,CNI4C,AMJ5C,CDQE,EAEmB,CLNrB,EAA8D,CFMtD,CAAwB,COF9B,ADRE,ECU4D,AJE/C,CAAyB,CHFL,QGEpB,EHFT,AGE6C,aAApC,CAAb,ELJM,CAAN;AOPQ,AHIV,AEAA,AGGA,APGK,AFFJ,AKIA,AGZC,AECJ,QJGQ,CIHR,ENGS,CKGP,CFPU,ACAH,INQH,CIJ2B,CFAhB,CEAkB,AGGjC,ADPE,CJIF,AIJe,ENUJ,AQTb,CHDY,AEOV,ACNa,EJG0B,CCJ7B,GCAR,GAAyB,CFII,EAAkB,ECJvC,IGCG,EJG0C,MAAxB,EAA/B,IIHF,2OFDI;ADEQ,AHGV,AEAA,AGGU,APGJ,AFDN,AKGA,AGLE,AELJ,QVOM,CILC,AMFP,CVOQ,CMLC,ADQA,CEXG,CHGV,AKGU,ADAH,GJHK,CKGF,CCLZ,CHDY,CEMA,ATEM,CKGC,AKVnB,CNEE,AEAA,ADQO,CCRY,CGGT,ADAR,CHKmB,CLHjB,AKGoB,CEXd,APQV,AQFqB,EREI,CMLzB,CCHU,CDGkB,AEGF,CNGP,EGEc,IGLZ,CNGf,AMH4B,CNGP,AGEH,CCRxB,EDQ0C,EHFV,EGER,GAAyB,GAA5B,EHFf,CMHe,CNGuB,AGEQ,AGLC,GHKhC,GAAmC,EHFlD,EGEe,GAAuC,IGL1D,EHKK,GAAiE,QAAK,GAAL,GAAS,IAAT,GAAa,OAArF;AEXU,AHIV,AEAD,AGGoB,APGd,AFDH,AKGH,AGLG,AELF,QAAI,CNEC,GGJW,CEOG,ADAZ,CJHP,AJKQ,GILK,CJKD,CSFO,ADAjB,GCAiB,ADAH,CDPA,APSR,CAAU,EUPd,CNEJ,CKGmB,GFPH,ACOS,QDPf,CGEN,CAAK,GFKO,CRER,AQF+B,CRErC,MUPE,CFKY,CAAd,GELuB,IAAzB,EAA+B;AHFrB,AHKV,AECF,AGJU,APUL,AFFF,AKhBH,AGcI,AELA,IJGA,IFDI,ACXR,IEM4B,CEElB,APGN,AMGK,CNIH,CGlBN,AKSW,GNEO,AECA,ADZlB,CCYA,CEEI,CNIS,AMJI,CJHK,AFOhB,COVI,CPUM,AQTL,CHHiB,ALYT,AGlBnB,CIQuB,GLGL,CAAY,CKHpB,CDMN,CDRwB,ACQC,KAAK,GELvB,CAAkB,CHHjB,AHK+B,CIGvC,UJHc,EAAsC,IAAtC,AMFW,CNE3B,aMF2B,CAAK,WAAvB,CAAP;AHHQ,AHMV,AEEF,AGLU,APUP,AFDD,AQHE,AELD,QVQG,CMJN,AJRW,CFYH,EOZgC,AHM9B,CKHA,ADMD,MJHP,CAAgB,CIGd,CRGgB,AQHF,CJHhB,CGNsC,AHMlB,AEEtB,EGLU,CHKV,AECuB,CRGjB,CSToB,ATSxB,CSTQ,CTSmB,COZW,AHMtC,AIGE,EJH4B,OGNpB,2BHMV;AGNU,AHOV,AEEA,AGuEQ,ATnEN,AQHA,AELF,QNEI,AEEE,CFFD,EMFE,CHL0C,CEgFzC,ADtED,CFDK,ANIJ,IAAI,CMJK,CIJV,CNEU,CEEL,CNIJ,CMJR,AGuEQ,APhFC,AFaS,AQHhB,CJHG,CAAiB,CKyEA,MFhF2B,EGK1C,CAAgB,CNElB,CAAD,CKyEkB,EFhF2B,CHOX,KJM9B,CAAN,EINoC,IMFf,CNEe,CAAM,GGPlC,EHO4B,KAAgB,EMF/B,CAAK,CNE5B,EAA4D,MMFrD,CAAP;AHJE,AHOA,AEEF,AGuEE,ATnED,AQHA,AELF,QJIK,KCTG,CDSG,EFFA,AKyEF,IFhFN,GAAe,AHOf,AKyEa,CLzEG,CEEd,EFFF,CAAoB,AEEE,CGuEJ,CHvEpB,ECT0B,ADSE,KGuEb,CAAc,KLzE3B,AKyEA,EFhFe,AHOsB,CGPC,SAAvB,CAAf,AHO8C,QAAA,KAAA,CAAM,KAApD;AGNA,AHOD,AEEC,AGuEA,APlFO,AFgBT,AQHO,AELT,KRRE,GFgBM,AURA,GAAR,CAAY,CHNH,AGMI,GD0EH,ETlEQ,EOdd,CAAa,CDSC,AEET,EELG,CJGR,CIHsB,IHNtB,CAAuB,AEgFF,ATlEP,AQHT,CAAA,EDXL,CAA2B,AGML,GVQR,CSkEe,ATlEL,AQHnB,GAAP,CCqEuB,ATlEP,AURQ,CD0EY,ATlEL,CURrB,CAAZ,ED0EyB,ACzEtB,CDyEC,ETlEoC,CQHvB,AELjB,CHNI,AGOI,EVOU,CAAhB,AQHA,EAAgC,KEJzB,EAAD,EAAc;AHNlB,AHOF,AEEE,AGuEA,APrEJ,AFGE,AQHE,QRGE,AURI,GNCD,AFIT,CKXQ,CCWC,GNAT,AQLU,CHNG,ACWT,CJJF,AKyEO,CHvEM,AIHL,CVQQ,AQHF,AELN,EHNF,EPcN,AQHE,EFFA,ANKoB,COdD,CDSC,EAApB,AGuEA,CAAkB,OFhFlB,CEgFA,CFhFgC,EEgFH,YAA7B;AF/EE,AHOL,AEEE,AGuEC,AP/FJ,AF6BI,AQHA,CN1BJ,EAAA,KQoBiB,IFMP,ERGA,CUTO,CD2ET,CFhFG,CPcG,AUTG,CAAA,CFMC,ECqEL,CTlEH,COdJ,APcc,COdD,ECWM,GCqEjB,CAAc,CDrEQ,EDXxB,CAAuB,ECWX,CDXZ,CAA2B,CCWK,GCqE9B,CDrEJ,CRGkC,CSkED,GAA7B,GTlEqC,COdvC,AEgFsC,GTlExB,GSkE6B,ATlEA,IAAvC,CAAN,GSkEwC,CAAc,YAAd,GAA6B,MAAK,QAAL,CAAc,YAAnF,EAAiG;AF/EhG,AHQL,AECC,AGuEK,APrEO,AFGV,AQHC,AEPuB,INIrB,IFGO,GQPc,EROd,AMAJ,GJHS,AFGG,CMAR,GNAY,CMAR,AEPoB,CD4E1B,ADrEP,EAAgB,CNAC,CQPM,CROd,CMAW,AEPoB,ED4EtC,CAAc,CC5EO,CFOE,AEPF,GD4ErB,CAAoB,IDrEF,CAAc,CCqEhC,GAAgC,EDrElC,EAA0C,ECqEH,CDrEvC,EAA+C,KCqEb,CAAc,YAAd,GAA0B,IAA1D;AF/EF,AHQF,AENF,AG8EM,APpEN,AFGE,AQJI,AER2C,CADjD,OJAA,CJUA,EFGS,COfC,EHQE,AFIZ,GAAA,AMDW,MFTX,EESM,CDXkB,ADExB,AG8EM,ADrEc,CAAd,EAAiB,YFTvB,AG8EM,EDrEA,CAAgC,EDXM,GCWtC,eDXkB,CAApB;AACA,AHQA,AKwEC,APpEH,AFGE,AQJC,AEPL,SAAA,ERQS,EKZA,EHQE,AFIT,AFGS,CEHM,EQRjB,CAAmB,CHJf,CAAa,CHQC,CJOC,CAAR,AUXX,CVUS,CUV+B,IHJpC,AGIJ,CNGY,AFKiB,CQR4B,CHJ5B,CLYZ,GAAgB,UAAA,KAAA,CAAM,EAAE,cAAY,IKXrB,KAAK,GLWE,EAAN,CAA/B,EKZ2B,GACgB,6DADhB,GAER,KAAK,KAFG,GAEE,qDAFF,GAGR,KAAK,UAHG,GAGU,UAHV,GAGoB,gLAHpB,GAQY,KAAK,QARjB,GAQyB,+BARzB,GAQsD,KAAK,KAR3D,GAQgE,kFARhE,GAUY,QAVZ,GAUoB,uBAVpB,GAUyC,WAAA,OAAA,CAAQ,KAAK,GAAL,EAAR,EAAoB,IAAI,IAAJ,CAAS,UAAT,CAApB,CAVzC,GAUkF,qCAVlF,IAYjB,cAAc,8CAA0C,WAA1C,GAAqD,SAAnE,GAA+E,EAZ9D,IAYgE,iGAZhE,GAejB,SAfiB,GAeR,gCAfjB;AAmBA,AHVA,AKyEA,APrEF,AFGE,AQJA,AEPF,WRQO,GFGC,AUXR,CRQW,GMDT,CJHW,GFIN,AFGS,CEHG,AFGX,CAFD,CSoEQ,CLzEK,EMJpB,CAAe,ED6EK,CF/DM,CLNP,AMDjB,EJLQ,EGYqB,GLNZ,EAAO,EKMA,AE+DxB,CF/DqC,EGdxB,cHcW,AGdX,CHc0C,AGdrC,MAApB,UHcE;AACD,AHVC,AKyEA,APtE4B,AFI5B,AQJD,AEND,KFDO,GECD,ONGG,AFGsB,COsEzB,ATlEI,GUVO,GRM6B,CQNzB,KD4EnB,ATlEoB,ESkEF,ITlEV,GAAqB,CEJA,GAAkC,GFI3B,AUVjB,IRMS,EFIpB,GAAqC,QAHxC,AUPU,CAAsB,IAAtB,EAA4B,KAA5B,CAAjB;AHeO,AHfG,AK6EN,APvEoE,AFKtE,AQHK,AEPP,KNFgB,AFOT,EACJ,IADI,CACC,CQNC,IAAT,CAAc,EVUA,COIP,CE8DE,APtED,AMCD,MNDC,COsEJ,AC5EJ,CHcO,AE8DU,APtEH,AQNY,CHcnB,ACPA,CAAA,KRGwB,EUVI,CFO5B,CCqEH,ETlEU,AQHd,CCqE+B,CF9DxB,CPJiC,AUVxC,EHcA,KPJ+C,AQH/B,KDOM,ACPtB,ECqEI,ADrE+B,MRGK,CAA1B,EOId,CPJgE,COIhB,gBPRzC;AOSL,AHXF,AKyEG,APvEe,AFKhB,AQHA,AENF,QAAI,IHaE,AHXE,CKuEN,ADnEK,ENFW,EKSP,AGbE,CFMX,CCqEO,ATlEE,EELa,AMET,EENI,GFMjB,EDOI,APTC,GUJM,CRIsB,CKSR,CGbG,CAA9B,EAAiC,CRIf,EAAyB,EAAE,EKS3C,EAAsC,ELTW,MAAR,EAAzB,CAAA;AKUd,AHXF,AKyEE,APxEwD,AFM1D,AQHA,AENA,KREK,EAEJ,IAFI,CAEC,AMEF,GJJG,EIIP,AENA,EFMW,ERGA,CIPG,AKyEP,APvED,OOuEJ,CAAa,APvET,CEHA,CFGQ,AFDT,CUHL,CAAiB,MAAM,CD2ErB,GAA2B,EC3E7B,EAA+B,CAA/B,EACG,IADH,CACQ,QD0EN,EC1EO,EAAD,EAAU;AHajB,AHXD,AKyEE,APvEA,AFKF,AQHE,YNFI,IFKE,AUTG,CFMJ,EJJI,EFEI,COuER,CPvEL,AFKa,CUTJ,CRIQ,CEFD,CMFP,CFMT,CRJG,AQIc,IAAjB,EJNI,AK2EJ,CDrEwB,ECqEH,IDrES,OCsE5B,CDtEF,WCsEE;AF9DJ,AHXA,AKyEU,APvEN,AFKJ,AQHC,AEPsB,SFKvB,IDSK,APJA,EIPE,AIIA,INFI,AQLY,CVUX,GARP,COYL,CGd6B,EHcV,AE8DT,CPvEU,IAAT,AQLY,CAAc,CRKjC,EOuEM,EF9DV,KGdqC,OD4E3B,AC5E2B,CD4EZ,CC5EmB,GD4ElC,EAAqB,IAArB,CAA0B,UAAA,IAAA,EAAI;AF5DxC,AHhBM,AK4EsC,APtEzC,AFKH,AQHE,AER8C,YHgB5C,GPLG,EOKE,ACRF,KRGO,CUXkC,CHgB5C,CAAa,EPdZ,CQMH,CDQE,ACRe,CDQG,CE4DsB,CC5Ea,GHgBrD,EE4D6C,GF5DjB,IE4DY,ADpE1C,CDQmC,AE4DoB,ADpEtB,AERa,CAAuB,KFQrE,EER8C,CD4EJ,AC5EI,EHgBhD,CE4DqE,CF5DnB,GE4DN;AF3D1C,AHvBY,AKkF2D,APrEvE,AFKF,AQHC,AET8E,CNNnF,YMM2B,CAAA,CROd,EKUF,IE2DG,AThEG,ESiEN,CF5DL,ALVgB,CKUH,EE2DL,CACE,APtEH,AFKW,GELK,GKUvB,CAAuB,ALVhB,CAAqB,EKU5B,CAA2B,CE4DjB,MPtEkB,IAAA,EAAI,CKUhC;AACD,AHXL,AKsEsB,APtEoB,AFLjC,AQQN,AEViF,KVElF,AQCO,IDaL,AHTJ,AMRI,MHmBO,ILX+B,MEA1C,CAA0B,CFAwB,IOsE5B,EPtEoB,CEA1C,AFAyD,EEAb,eKsEtB,aPtE+D,IAA3C,CAAA,KOsEpB,CAAwB,MAAK,OAA7B,CAAA;AF1DhB,AHXJ,AKqEyD,APtEiC,AFO3F,AQFQ,AEXN,QNOK,CFDK,CAAP,MECU,CGWL,IEyDG,CDhEL,CCkEE,CF3DL,CAAa,AHXM,EKoEX,CAEE,GDlEP,CJJO,AIIP,CJJwB,CGW3B,CAAuB,CHXb,CAAqB,CKsErB,GF3DV,CAA8B,GCP3B,GAAP,KCgEY,CAAA,EFzDR,AHXU,CAAd,CIIqB,OAArB,EAA0C;ADQvC,AHXH,AKqE8B,APtE3B,AFQQ,AQHT,AEVF,KRFO,EAQJ,CEAG,AJOK,AUbP,GRFG,CAQC,AMIA,KC8DiB,ACxEZ,ED4EP,CLtEY,EKkEO,APlEjB,AFOG,CS2DP,APlEI,AQNW,CFUC,CNJX,AFOmB,GQHJ,CJJG,AMN3B,EAA2B,KNMT,CAAiB,GAAjB,CAAqB,IJO5B,GQHa,gBJJN,AIIE,CJJpB,AIKI,OADgB,EAEhB,KAAK,IAAL,GAAY,KAAK,IAAL,CAAU,KAAtB,GAA8B,IAFd,CAAlB;ADQD,AHXD,AKsEG,APvEY,AMOb,AEZA,KHMK,GHAD,KIMC,GJNO,AFDC,KAAA,AMOb,CNPmB,AMOL,GJNO,CIMrB,CNPa,AMOM,GNPQ,CAAd,CECD,CAAiB,GAAjB,AIMZ,CJNiC,mBAArB,CAAd;AGYF,AHVE,AKqEC,APxEgC,AMQ/B,AEZD,KRJM,EAQ4B,CEG7B,CKiDE,EFvCV,ECLS,INR4B,EEGlB,CIKf,CAAa,ENRoB,EAAM,EKa3C,KHVgC,CIK5B,CAA0B,EJLX,CAAkB,OIKG,EJLM,GAA3B,CAAjB,CIKE,EAA6C,KAAK,MAAlD;AD3CJ,AHuCE,AKsEQ,AP1EuC,AMS7C,AEXF,CHjCF,EAAA,KHuCQ,AMNA,KD4EE,ADjED,EJLM,CFJkC,CQFhC,CFWb,GNT6C,CAAM,GO0E7C,CLtEgB,AMNlB,CREyC,CO0ExB,EP1EsC,EQF9C,CAAC,CRE+B,CAAoB,CEIjC,EKsEV,GP1EiD,AQF1D,CNMF,CKsEU,AC5ES,ENMW,AKsEP,EP1E+B,QEId,QAArD;AGvCW,AHyCX,AKqEE,AP3EgF,AMUhF,AEXA,KRPK,CAAP,EK3BW,CHyCN,GMPC,CFWC,CJJP,EMPE,CNOW,CAAC,AKqEN,AC5EI,KNOZ,CGzCW,AC6CT,GD7CS,KE8GT,WF9GS;AAkDb,AHRE,AKqEE,AP3EH,AMUG,AEXE,SHeN,AHRO,OKqEC,AC5EE,ENOR,AIIE,GJJe,CAAC,AKqEP,SLrEX,CGQF,AE6DI,CF7DoC,ACJpC,AEXoB,CD4EC,IC5ED,CAAlB,MHeN,EAA6D;AAC3D,AHRA,AKqEI,APvFN,AMsBG,AEXG,KFEG,GNbT,CEkBO,CGQC,GL1BR,CK0BE,AHRA,CGQW,CL1Bb,AQWU,CNOK,CAAC,GFlBhB,AQWM,ENOJ,AMPe,KHeS,gBAAb,CAAiD,GAAjD,CAAX,EACG,OADH,CACW,UAAA,CAAA,EAAC;AAAM,AHPlB,AKoEG,ADhEK,AEZF,QNQF,EGOgB,MAAF,CHPL,EGOgB,GCHrB,CJJJ,IGOc,CAAqB,AHPf,EGOiB,CHPrC,AIII,CAAA,CDG+B,AGfhB,ENQQ,CGOgB,IHPX,EMRb,CFYf,GDG+B,ACHvC,GJJ+B,IMRR,CNQ2B,AMRf,CNQnC,EAAqD,CIIrD,EEZyC,MAAlB,EAA0B,QAA1B,CAAjB;AHesD,AHN1D,AKoEA,ADhEA,AEZG,KHaL,OHLQ,CIID,AEdH,KD8EG,CC5EI,KNQS,AIIlB,CAAiB,GJJK,AKoEtB,GAAkB,CLpEA,CAAS,CAAT,CAAlB,AKoEA,CDhEA,GAAkC,KAAK,KAAL,GAAU,UAAV,IAAqB,KAAK,KAAL,KAAe,CAAf,GAAmB,EAAnB,GAAwB,GAA7C,CAAlC;ADGF,AHNE,AKoEA,ADhED,AEZK,KFUE,KDIF,IAAN,CAAW,CE8DL,ELpEM,IKoED,IAAT,EF9DsB,AE8DP,GLpEf,CAAwB,CMRH,INQQ,KAA7B,AMRqB,EHcZ,CAAgD,KAAhD,CAAX,EACG,AGfoB,CACf,MHaR,CACW,UAAA,CGdH,EHcG,EAAG,UGdN,CAAK,SADU,EAEf,kBAAA,cAAA,CAAK,GAFU,EAGf,kBAAA,cAAA,CAAK,KAHU,EAIf,kBAAA,cAAA,CAAK,WAJU,EAKf,IALe,CAKV,UAAA,QAAA,EAAQ;AHUH,AHNhB,AKoEE,ADhEN,AEPU,WFOV,CJJU,GGMU,IAAI,AHNP,GKoEN,ELpEW,CGMF,GAAa,ACFjC,AEPkB,CNGD,CAAW,AKoEtB,CLpEuB,AKoET,KCvEV,EHSuB,CE8D3B,ELpEiC,CKoER,IAAzB,ELpEuB,KGMT,AHN+B,IAAI,IAAJ,GAAW,OAAX,EAAvB,IAA+C,IAA/C,GAAsD,EAAjE,CAAb;AGM4C,AHL5C,AKoEE,AD7HN,AEsDU,CFtDV,EAAA,ED6DE,OHJQ,UAAU,AKoET,OCvEQ,INGY,CKoEzB,CAAkB,ECvEd,CAAkB,KDuEtB,ACvEI,ENGU,CKoEe,ELpEW,EKoExC,eLpEF;AGMF,AHJE,AKmEC,AD9HQ,AEuDH,QFvDG,ED+DL,IAAN,CAAW,CHJD,IAAR,CAAa,II3DJ,EEuDI,CHQS,AC/Db,QEuDI,QHQJ,CAAiD,AC/DjD,EEuDI,CAAY,ENIe,IMJT,GNIlB,GAAkC,AMJlC,EAA0B,GHQ9B,CAAX,EACG,EGTY,CAAP,GNIO,CGIf,CACW,CHLqD,IAAjD,GAAqD,EGKzD,CAAA,EAAC,IHLG,IAA+D,SAAS,CAAT,GAAa,EAAb,GAAkB,GAAjF,IAAoF,GAAjG;AGKc,AHJf,AKmEC,ACvEK,eHQS,EAAE,AGjBK,CDgFhB,AChFD,GHiBU,GAAS,AE+DvB,CAAY,MAAK,QAAL,CAAc,KAA1B,EF/D8C,AE+Db,EF/De,GE+DhD,CAAuC,IF/DzB,QE+DyB;AF/DiB,AHH3D,AKkEgD,ACtE1C,KHML,kBEgE+C,CAAA;AF9DhD,AHFD,AKgEkD,ACrE5C,SNKN,IKgEI,EAAgD,IAAhD,ACrES,CNKb,AKgEyD,CLhEpC,QAArB,EAAuC,CKgEkB,ECrE7B,IAAf,CAAoB,UAAA,OAAA,EAAO;AHAxC,AHME,AKgEI,ACrEE,QHDR,AHMQ,OAAO,OKgEJ,ELhEa,CMLP,MHDjB,AHMe,CAAiB,AKgE1B,EFtEN,CHMe,AKgES,CLhEY,EML5B,CAAuB,CDqEzB,ELhES,CAAb,GMLM,WHDR;AHOE,AKgEI,ACrEE,QNKF,SAAS,IAAb,CKgES,CLhEU,OKgEf,CAAc,KCrEQ,GDqEtB,ECrEE,CDqEuB,CAAC,MAAK,IAA/B;AL/DF,AKgEE,ACrEC,aAHM,CAAP,CNQK,CAAP,MKgEO,QAAL,CAAc,KAAd,GAAsB,EAAtB;AL/DH,AKgEG,ACrED,sBDqEM,YAAL,CAAkB,QAAlB,GAA6B,KAA7B;AL/DJ,AKgEI,ACpEF,QNII,OMJG,CNIK,MKgEL,CCpEA,KAAA,GAAQ,EDoEb,CAAiB,CCpEZ,CDoEc,ACpED,QDoES,ICpET,EDoEc,ELhEc,EKgEnB,CAAU,CLhE3B,CAAyC,IAAzC,CAAd,MKgE+B,CAAwB,uBAAxB,CAAV,EAAjB;AL/DJ,AKgEI,ACrEwB,QNKxB,UAAU,CMLc,GNK5B,AKgES,ELhEW,IMLQ,CDqExB,CAAa,MCrEW,EAAA,GDqExB,GAA2B,gBAA3B;AL/DF,AKgEC,ACtEmC,SAA7B,EAA+B,ED+DtC,ELzDO,AMNA,CNMP,AMN2C,UAAA,CAAA,EAAC;ANO7C,AKgEA,ACtEG,SDoDI,UCpDG,CAAP;ANOJ,AKiEQ,ACvEJ,WNMG,CAAC,CKiEA,KLjEM,CAAN,CAAR,CMNa,GDuEL,GAAc,CCvElB,CAAiB,IAAjB,IDuEmB,EAAD,EAAkB;ALhEzC,AMNK,gBDsEqB,SAAA,GAAA,ICtED,OAApB,CAA4B,IAA5B;ANQN,AK+DI,ACtEC,SNOL,AMXW,CAAP,MD0EI,EAAE,EL/DV,CAAqB,OAArB,EAAqC,MK+DT,iBAApB,KAA0C,CAAC,OAAO,SAAP,CAAiB,QAAjB,CAA0B,YAA1B,CAA/C,EAAwF;AL9D1F,AK+DI,ACtEH,KA5BD,MNmCO,MAAM,OAAN,EAAe,IAAf,CAAoB,UAAA,QAAA,EAAQ;AACjC,AK+DC,ACrEH,QAAM,INMA,SAAS,MAAT,GMNsB,ENMF,EMNM,CNM9B,EAA6B,qBMNC,mBAAJ,CAAwB,IAAxB,EAA8B,MAA9B,CAA5B;ANOI,AK+DF,ACrEF,aAAS,GDqEH,IL/DF,AMNJ,CAAiB,EDqEJ,EL/DT,CAAM,KAAN,CK+DE,ACrEN,CDqEuB,ACrEM,CNMX,IAAd,GK+DE,CAA0B,UAA1B,CAAJ,ACrE+C,EDqEJ,KCrE7C;ANOG,AK+DC,ACrEJ,cAAA,eAAA;ANOE,AK+DC,ACrEJ,YNMO,SAAS,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,AK+DF,ACpEJ,iBAAiB,CDoER,GL/DM,CK+DX,CAAU,EL/DR,GAAgB,IAAhB,AMLN,CNK2B,CMLO,EDoE9B,CAAwB,ML/DD,AMLO,INKP,EAAI,UK+D3B,EAAiD,ACpEnB,GAAA,MDoE9B,CAA2D,MAA3D,CAAkE,UAAlE;AL9DI,AK+DJ,ACpEF,mBDoES,CL/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","file":"utterances.0f05344f.map","sourceRoot":"../src","sourcesContent":["export function deparam(query: string): { [name: string]: string; } {\n  let match: RegExpExecArray | null;\n  const plus = /\\+/g;\n  const search = /([^&=]+)=?([^&]*)/g;\n  const decode = (s: string) => decodeURIComponent(s.replace(plus, ' '));\n  const params: { [name: string]: string; } = {};\n  // tslint:disable-next-line:no-conditional-assignment\n  while (match = search.exec(query)) {\n    params[decode(match[1])] = decode(match[2]);\n  }\n  return params;\n}\n\nexport function param(obj: any) {\n  const parts = [];\n  for (const name in obj) {\n    if (obj.hasOwnProperty(name)) {\n      parts.push(`${encodeURIComponent(name)}=${encodeURIComponent(obj[name])}`);\n    }\n  }\n  return parts.join('&');\n}\n","export default /^([a-z][\\w-]+)\\/([\\w-.]+)$/i;\n","import { deparam } from './deparam';\nimport repoRegex from './repo-regex';\n\nfunction readPageAttributes() {\n  const params = deparam(location.search.substr(1));\n\n  let issueTerm: string | null = null;\n  let issueNumber: number | null = null;\n  if ('issue-term' in params) {\n    issueTerm = params['issue-term'];\n    if (issueTerm !== undefined) {\n      if (issueTerm === '') {\n        throw new Error('When issue-term is specified, it cannot be blank.');\n      }\n      if (['title', 'url', 'pathname'].indexOf(issueTerm) !== -1) {\n        issueTerm = params[issueTerm];\n      }\n    }\n  } else if ('issue-number' in params) {\n    issueNumber = +params['issue-number'];\n    if (issueNumber.toString(10) !== params['issue-number']) {\n      throw new Error(`issue-number is invalid. \"${params['issue-number']}`);\n    }\n  } else {\n    throw new Error('\"issue-term\" or \"issue-number\" must be specified.');\n  }\n\n  if (!('repo' in params)) {\n    throw new Error('\"repo\" is required.');\n  }\n\n  if (!('origin' in params)) {\n    throw new Error('\"origin\" is required.');\n  }\n\n  const matches = repoRegex.exec(params.repo);\n  if (matches === null) {\n    throw new Error(`Invalid repo: \"${params.repo}\"`);\n  }\n\n  return {\n    owner: matches[1],\n    repo: matches[2],\n    branch: 'branch' in params ? params.branch : 'master',\n    configPath: 'config-path' in params ? params['config-path'] : 'utterances.json',\n    issueTerm,\n    issueNumber,\n    origin: params.origin,\n    url: params.url,\n    title: params.title,\n    description: params.description\n  };\n}\n\nexport const pageAttributes = readPageAttributes();\n","// export const UTTERANCES_API = 'http://localhost:5000';\nexport const UTTERANCES_API = 'https://api.utteranc.es';\n","import { UTTERANCES_API } from './utterances-api';\nimport { param } from './deparam';\n\nconst authorizeUrl = `${UTTERANCES_API}/authorize`;\nconst tokenUrl = `${UTTERANCES_API}/token`;\n// tslint:disable-next-line:variable-name\nconst redirect_uri = `${location.origin}/authorized.html`;\n\nclass Token {\n  private readonly storageKey = 'OAUTH_TOKEN2';\n  private token: string | null = null;\n\n  constructor() {\n    try {\n      this.token = localStorage.getItem(this.storageKey);\n      // tslint:disable-next-line:no-empty\n    } catch (e) { }\n  }\n\n  get value() {\n    return this.token;\n  }\n  set value(newValue) {\n    this.token = newValue;\n    try {\n      if (newValue === null) {\n        localStorage.removeItem(this.storageKey);\n      } else {\n        localStorage.setItem(this.storageKey, newValue);\n      }\n      // tslint:disable-next-line:no-empty\n    } catch (e) { }\n  }\n}\n\nexport const token = new Token();\n\nexport function login() {\n  window.open(`${authorizeUrl}?${param({ redirect_uri })}`);\n  return new Promise(resolve => (window as any).notifyAuthorized = resolve)\n    .then(search => fetch(tokenUrl + search, { mode: 'cors' }))\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return response.text().then(text => Promise.reject(`Error retrieving token:\\n${text}`));\n    })\n    .then(t => { token.value = t; }, reason => { token.value = null; throw reason; });\n}\n","declare function escape(str: string): string;\n\nexport function decodeBase64UTF8(encoded: string) {\n  encoded = encoded.replace(/\\s/g, '');\n  return decodeURIComponent(escape(atob(encoded)));\n}\n","import { token } from './oauth';\nimport { decodeBase64UTF8 } from './encoding';\nimport { UTTERANCES_API } from './utterances-api';\n\nconst GITHUB_API = 'https://api.github.com/';\nconst GITHUB_ENCODING__HTML_JSON = 'application/vnd.github.VERSION.html+json';\nconst GITHUB_ENCODING__HTML = 'application/vnd.github.VERSION.html';\nconst GITHUB_ENCODING__REACTIONS_PREVIEW = 'application/vnd.github.squirrel-girl-preview';\nconst PAGE_SIZE = 100;\n\nlet owner: string;\nlet repo: string;\nlet branch: string;\n\nexport function setRepoContext(context: { owner: string; repo: string; branch: string; }) {\n  owner = context.owner;\n  repo = context.repo;\n  branch = context.branch;\n}\n\nfunction githubRequest(relativeUrl: string, init?: RequestInit) {\n  init = init || {};\n  init.mode = 'cors';\n  init.cache = 'no-cache'; // force conditional request\n  const request = new Request(GITHUB_API + relativeUrl, init);\n  request.headers.set('Accept', GITHUB_ENCODING__REACTIONS_PREVIEW);\n  if (!/^search\\//.test(relativeUrl) && token.value !== null) {\n    request.headers.set('Authorization', `token ${token.value}`);\n  }\n  return request;\n}\n\nconst rateLimit = {\n  standard: {\n    limit: Number.MAX_VALUE,\n    remaining: Number.MAX_VALUE,\n    reset: 0\n  },\n  search: {\n    limit: Number.MAX_VALUE,\n    remaining: Number.MAX_VALUE,\n    reset: 0\n  }\n};\n\nfunction processRateLimit(response: Response) {\n  const limit = response.headers.get('X-RateLimit-Limit')!;\n  const remaining = response.headers.get('X-RateLimit-Remaining')!;\n  const reset = response.headers.get('X-RateLimit-Reset')!;\n\n  const isSearch = /\\/search\\//.test(response.url);\n  const rate = isSearch ? rateLimit.search : rateLimit.standard;\n\n  rate.limit = +limit;\n  rate.remaining = +remaining;\n  rate.reset = +reset;\n\n  if (response.status === 403 && rate.remaining === 0) {\n    const resetDate = new Date(0);\n    resetDate.setUTCSeconds(rate.reset);\n    const mins = Math.round((resetDate.getTime() - new Date().getTime()) / 1000 / 60);\n    const apiType = isSearch ? 'search API' : 'non-search APIs';\n    // tslint:disable-next-line:no-console\n    console.warn(`Rate limit exceeded for ${apiType}. Resets in ${mins} minute${mins === 1 ? '' : 's'}.`);\n  }\n}\n\nfunction readRelNext(response: Response) {\n  const link = response.headers.get('link');\n  if (link === null) {\n    return 0;\n  }\n  const match = /\\?page=([2-9][0-9]*)>; rel=\"next\"/.exec(link);\n  if (match === null) {\n    return 0;\n  }\n  return +match[1];\n}\n\nfunction githubFetch(request: Request): Promise<Response> {\n  return fetch(request).then(response => {\n    if (response.status === 401) {\n      token.value = null;\n    }\n    if (response.status === 403) {\n      response.json().then(data => {\n        if (data.message === 'Resource not accessible by integration') {\n          window.dispatchEvent(new CustomEvent('not-installed'));\n        }\n      });\n    }\n\n    processRateLimit(response);\n\n    if (request.method === 'GET'\n      && [401, 403].indexOf(response.status) !== -1\n      && request.headers.has('Authorization')\n    ) {\n      request.headers.delete('Authorization');\n      return githubFetch(request);\n    }\n    return response;\n  });\n}\n\nexport function loadJsonFile<T>(path: string, html = false) {\n  const request = githubRequest(`repos/${owner}/${repo}/contents/${path}?ref=${branch}`);\n  if (html) {\n    request.headers.set('accept', GITHUB_ENCODING__HTML);\n  }\n  return githubFetch(request).then<FileContentsResponse | string>(response => {\n    if (response.status === 404) {\n      throw new Error(`Repo \"${owner}/${repo}\" does not have a file named \"${path}\" in the \"${branch}\" branch.`);\n    }\n    if (!response.ok) {\n      throw new Error(`Error fetching ${path}.`);\n    }\n    return html ? response.text() : response.json();\n  }).then<T>(file => {\n    if (html) {\n      return file;\n    }\n    const { content } = file as FileContentsResponse;\n    const decoded = decodeBase64UTF8(content);\n    return JSON.parse(decoded);\n  });\n}\n\nexport function loadIssueByTerm(term: string) {\n  const q = `\"${term}\" type:issue in:title repo:${owner}/${repo}`;\n  const request = githubRequest(`search/issues?q=${encodeURIComponent(q)}&sort=created&order=asc`);\n  return githubFetch(request).then<IssueSearchResponse>(response => {\n    if (!response.ok) {\n      throw new Error('Error fetching issue via search.');\n    }\n    return response.json();\n  }).then(results => {\n    if (results.total_count === 0) {\n      return null;\n    }\n    if (results.total_count > 1) {\n      // tslint:disable-next-line:no-console\n      console.warn(`Multiple issues match \"${q}\". Using earliest created.`);\n    }\n    return results.items[0];\n  });\n}\n\nexport function loadIssueByNumber(issueNumber: number) {\n  const request = githubRequest(`repos/${owner}/${repo}/issues/${issueNumber}`);\n  return githubFetch(request).then<Issue>(response => {\n    if (!response.ok) {\n      throw new Error('Error fetching issue via issue number.');\n    }\n    return response.json();\n  });\n}\n\nfunction commentsRequest(issueNumber: number, page: number) {\n  const url = `repos/${owner}/${repo}/issues/${issueNumber}/comments?page=${page}&per_page=${PAGE_SIZE}`;\n  const request = githubRequest(url);\n  const accept = `${GITHUB_ENCODING__HTML_JSON},${GITHUB_ENCODING__REACTIONS_PREVIEW}`;\n  request.headers.set('Accept', accept);\n  return request;\n}\n\nexport function loadCommentsPage(issueNumber: number, page: number) {\n  const request = commentsRequest(issueNumber, page);\n  return githubFetch(request).then(response => {\n    if (!response.ok) {\n      throw new Error('Error fetching comments.');\n    }\n    const nextPage = readRelNext(response);\n    return response.json()\n      .then<CommentsPage>((items: IssueComment[]) => ({ items, nextPage }));\n  });\n}\n\nexport function loadUser(): Promise<User | null> {\n  if (token.value === null) {\n    return Promise.resolve(null);\n  }\n  return githubFetch(githubRequest('user'))\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return null;\n    });\n}\n\nexport function createIssue(issueTerm: string, documentUrl: string, title: string, description: string) {\n  const request = new Request(`${UTTERANCES_API}/repos/${owner}/${repo}/issues`, {\n    method: 'POST',\n    body: JSON.stringify({\n      title: issueTerm,\n      body: `# ${title}\\n\\n${description}\\n\\n[${documentUrl}](${documentUrl})`\n    })\n  });\n  request.headers.set('Accept', GITHUB_ENCODING__REACTIONS_PREVIEW);\n  request.headers.set('Authorization', `token ${token.value}`);\n  return fetch(request).then<Issue>(response => {\n    if (!response.ok) {\n      throw new Error('Error creating comments container issue');\n    }\n    return response.json();\n  });\n}\n\nexport function postComment(issueNumber: number, markdown: string) {\n  const url = `repos/${owner}/${repo}/issues/${issueNumber}/comments`;\n  const body = JSON.stringify({ body: markdown });\n  const request = githubRequest(url, { method: 'POST', body });\n  const accept = `${GITHUB_ENCODING__HTML_JSON},${GITHUB_ENCODING__REACTIONS_PREVIEW}`;\n  request.headers.set('Accept', accept);\n  return githubFetch(request).then<IssueComment>(response => {\n    if (!response.ok) {\n      throw new Error('Error posting comment.');\n    }\n    return response.json();\n  });\n}\n\nexport function renderMarkdown(text: string) {\n  const body = JSON.stringify({ text, mode: 'gfm', context: `${owner}/${repo}` });\n  return githubFetch(githubRequest('markdown', { method: 'POST', body }))\n    .then(response => response.text());\n}\n\ninterface IssueSearchResponse {\n  total_count: number;\n  incomplete_results: boolean;\n  items: Issue[];\n}\n\nexport interface User {\n  login: string;\n  id: number;\n  avatar_url: string;\n  gravatar_id: string;\n  url: string;\n  html_url: string;\n  followers_url: string;\n  following_url: string;\n  gists_url: string;\n  starred_url: string;\n  subscriptions_url: string;\n  organizations_url: string;\n  repos_url: string;\n  events_url: string;\n  received_events_url: string;\n  type: string;\n}\n\nexport type CommentAuthorAssociation =\n  'COLLABORATOR'\n  | 'CONTRIBUTOR'\n  | 'FIRST_TIMER'\n  | 'FIRST_TIME_CONTRIBUTOR'\n  | 'MEMBER'\n  | 'NONE'\n  | 'OWNER';\n\nexport interface Issue {\n  url: string;\n  repository_url: string;\n  labels_url: string;\n  comments_url: string;\n  events_url: string;\n  html_url: string;\n  id: number;\n  number: number;\n  title: string;\n  user: User;\n  locked: boolean;\n  labels: {\n    url: string;\n    name: string;\n    color: string;\n  }[];\n  state: string;\n  assignee: null; // todo,\n  milestone: null; // todo,\n  comments: number;\n  created_at: string;\n  updated_at: string;\n  closed_at: null; // todo,\n  pull_request: {\n    html_url: null; // todo,\n    diff_url: null; // todo,\n    patch_url: null; // todo\n  };\n  body: string;\n  score: number;\n  reactions: {\n    total_count: number;\n    '+1': number;\n    '-1': number;\n    laugh: number;\n    confused: number;\n    heart: number;\n    hooray: number;\n    url: string;\n  };\n  author_association: CommentAuthorAssociation;\n}\n\ninterface FileContentsResponse {\n  type: string;\n  encoding: string;\n  size: number;\n  name: string;\n  path: string;\n  content: string;\n  sha: string;\n  url: string;\n  git_url: string;\n  html_url: string;\n  download_url: string;\n}\n\nexport interface IssueComment {\n  id: number;\n  url: string;\n  html_url: string;\n  body_html: string;\n  user: User;\n  created_at: string;\n  updated_at: string;\n  author_association: CommentAuthorAssociation;\n}\n\nexport interface CommentsPage {\n  items: IssueComment[];\n  nextPage: number;\n}\n\n/*\nquery IssueComments($owner: String!, $repo: String!, $issueQuery: String!) {\n  search(query: $issueQuery, type: ISSUE, first: 1) {\n    issueCount\n    edges {\n      node {\n        ... on Issue {\n          id\n          title,\n          comments(first: 100) {\n          \ttotalCount\n            edges {\n              node {\n                id,\n                createdAt,\n                bodyHTML,\n                author {\n                  avatarUrl,\n                  login\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  rateLimit {\n    cost\n    limit\n    remaining\n    resetAt\n  }\n\n  repository(owner: $owner, name: $repo) {\n    object(expression: \"master:utterances.json\") {\n      ... on Blob {\n        text\n      }\n    }\n  }\n}\n\n{\n  \"issueQuery\": \"user:jdanyow repo:utterances-demo debug\",\n  \"owner\": \"jdanyow\",\n  \"repo\": \"utterances-demo\"\n}\n*/\n","// todo: take a dependency on some relative time library.\n\nconst thresholds = [\n  1000, 'second',\n  1000 * 60, 'minute',\n  1000 * 60 * 60, 'hour',\n  1000 * 60 * 60 * 24, 'day',\n  1000 * 60 * 60 * 24 * 7, 'week',\n  1000 * 60 * 60 * 24 * 27, 'month'\n];\n\nconst formatOptions: Intl.DateTimeFormatOptions = { month: 'short', day: 'numeric', year: 'numeric' };\n\nexport function timeAgo(current: number, value: Date) {\n  const elapsed = current - value.getTime();\n  if (elapsed < 5000) {\n    return 'just now';\n  }\n  let i = 0;\n  while (i + 2 < thresholds.length && elapsed * 1.1 > thresholds[i + 2]) {\n    i += 2;\n  }\n\n  const divisor = thresholds[i] as number;\n  const text = thresholds[i + 1] as string;\n  const units = Math.round(elapsed / divisor);\n\n  if (units > 3 && i === thresholds.length - 2) {\n    return `on ${value.toLocaleDateString(undefined, formatOptions)}`;\n  }\n  return units === 1 ? `${text === 'hour' ? 'an' : 'a'} ${text} ago` : `${units} ${text}s ago`;\n}\n","export interface ResizeMessage {\n  type: 'resize';\n  height: number;\n}\n\nlet hostOrigin: string;\n\nexport function startMeasuring(origin: string) {\n  hostOrigin = origin;\n  addEventListener('resize', scheduleMeasure);\n  addEventListener('load', scheduleMeasure);\n}\n\nlet lastHeight = -1;\n\nfunction measure() {\n  const height = document.body.scrollHeight;\n  if (height === lastHeight) {\n    return;\n  }\n  lastHeight = height;\n  const message: ResizeMessage = { type: 'resize', height };\n  parent.postMessage(message, hostOrigin);\n}\n\nlet lastMeasure = 0;\n\nexport function scheduleMeasure() {\n  const now = Date.now();\n  if (now - lastMeasure > 50) {\n    lastMeasure = now;\n    setTimeout(measure, 50);\n  }\n}\n","import { IssueComment } from './github';\nimport { timeAgo } from './time-ago';\nimport { scheduleMeasure } from './measure';\n\nconst avatarArgs = '?v=3&s=88';\nconst displayAssociations: { [association: string]: string; } = {\n  COLLABORATOR: 'Collaborator',\n  CONTRIBUTOR: 'Contributor',\n  MEMBER: 'Member',\n  OWNER: 'Owner'\n};\n\nexport class CommentComponent {\n  public readonly element: HTMLElement;\n\n  constructor(\n    public comment: IssueComment,\n    private currentUser: string | null\n  ) {\n    const { user, html_url, created_at, body_html, author_association } = comment;\n    this.element = document.createElement('article');\n    this.element.classList.add('timeline-comment');\n    if (user.login === currentUser) {\n      this.element.classList.add('current-user');\n    }\n    const association = displayAssociations[author_association];\n    this.element.innerHTML = `\n      <a class=\"avatar\" href=\"${user.html_url}\" target=\"_blank\" tabindex=\"-1\">\n        <img alt=\"@${user.login}\" height=\"44\" width=\"44\"\n              src=\"${user.avatar_url}${avatarArgs}\">\n      </a>\n      <div class=\"comment\">\n        <header class=\"comment-header\">\n          <span class=\"comment-meta\">\n            <a class=\"text-link\" href=\"${user.html_url}\" target=\"_blank\"><strong>${user.login}</strong></a>\n            commented\n            <a class=\"text-link\" href=\"${html_url}\" target=\"_blank\">${timeAgo(Date.now(), new Date(created_at))}</a>\n          </span>\n          ${association ? `<span class=\"author-association-badge\">${association}</span>` : ''}\n        </header>\n        <div class=\"markdown-body markdown-body-scrollable\">\n          ${body_html}\n        </div>\n      </div>`;\n\n    processRenderedMarkdown(this.element.lastElementChild!.lastElementChild!);\n  }\n\n  public setCurrentUser(currentUser: string | null) {\n    if (this.currentUser === currentUser) {\n      return;\n    }\n    this.currentUser = currentUser;\n\n    if (this.comment.user.login === this.currentUser) {\n      this.element.classList.add('current-user');\n    } else {\n      this.element.classList.remove('current-user');\n    }\n  }\n}\n\nexport function processRenderedMarkdown(markdownBody: Element) {\n  Array.from(markdownBody.querySelectorAll<HTMLAnchorElement>('a'))\n    .forEach(a => { a.target = '_blank'; a.rel = 'noopener'; });\n  Array.from(markdownBody.querySelectorAll<HTMLImageElement>('img'))\n    .forEach(img => img.onload = scheduleMeasure);\n  Array.from(markdownBody.querySelectorAll<HTMLAnchorElement>('a.commit-tease-sha'))\n    .forEach(a => a.href = 'https://github.com' + a.pathname);\n}\n","import { User, Issue, IssueComment } from './github';\nimport { CommentComponent } from './comment-component';\nimport { scheduleMeasure } from './measure';\n\nexport class TimelineComponent {\n  public readonly element: HTMLElement;\n  private readonly timeline: CommentComponent[] = [];\n  private readonly countAnchor: HTMLAnchorElement;\n  private readonly marker: Node;\n  private count: number = 0;\n\n  constructor(\n    private user: User | null,\n    private issue: Issue | null\n  ) {\n    this.element = document.createElement('main');\n    this.element.classList.add('timeline');\n    this.element.innerHTML = `\n      <h1 class=\"timeline-header\">\n        <a class=\"text-link\" target=\"_blank\"></a>\n        <em>\n          - powered by\n          <a class=\"text-link\" href=\"https://utteranc.es\" target=\"_blank\">utteranc.es</a>\n        </em>\n      </h1>`;\n    this.countAnchor = this.element.firstElementChild!.firstElementChild as HTMLAnchorElement;\n    this.marker = document.createComment('marker');\n    this.element.appendChild(this.marker);\n    this.setIssue(this.issue);\n    this.renderCount();\n  }\n\n  public setUser(user: User | null) {\n    this.user = user;\n    const login = user ? user.login : null;\n    for (let i = 0; i < this.timeline.length; i++) {\n      this.timeline[i].setCurrentUser(login);\n    }\n    scheduleMeasure();\n  }\n\n  public setIssue(issue: Issue | null) {\n    this.issue = issue;\n    if (issue) {\n      this.countAnchor.href = issue.html_url;\n    } else {\n      this.countAnchor.removeAttribute('href');\n    }\n  }\n\n  public appendComment(comment: IssueComment) {\n    const component = new CommentComponent(\n      comment,\n      this.user ? this.user.login : null);\n    this.timeline.push(component);\n    this.element.insertBefore(component.element, this.marker);\n    this.count++;\n    this.renderCount();\n    scheduleMeasure();\n  }\n\n  private renderCount() {\n    this.countAnchor.textContent = `${this.count} Comment${this.count === 1 ? '' : 's'}`;\n  }\n}\n","import { User, renderMarkdown } from './github';\nimport { scheduleMeasure } from './measure';\nimport { processRenderedMarkdown } from './comment-component';\n\n// tslint:disable-next-line:max-line-length\nconst anonymousAvatar = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 16\" version=\"1.1\"><path fill=\"rgb(179,179,179)\" fill-rule=\"evenodd\" d=\"M8 10.5L9 14H5l1-3.5L5.25 9h3.5L8 10.5zM10 6H4L2 7h10l-2-1zM9 2L7 3 5 2 4 5h6L9 2zm4.03 7.75L10 9l1 2-2 3h3.22c.45 0 .86-.31.97-.75l.56-2.28c.14-.53-.19-1.08-.72-1.22zM4 9l-3.03.75c-.53.14-.86.69-.72 1.22l.56 2.28c.11.44.52.75.97.75H5l-2-3 1-2z\"></path></svg>`;\n// base64 encoding works in IE, Edge. UTF-8 does not.\nconst anonymousAvatarUrl = `data:image/svg+xml;base64,${btoa(anonymousAvatar)}`;\n\nconst nothingToPreview = 'Nothing to preview';\n\nexport class NewCommentComponent {\n  public readonly element: HTMLElement;\n\n  private avatarAnchor: HTMLAnchorElement;\n  private avatar: HTMLImageElement;\n  private form: HTMLFormElement;\n  private textarea: HTMLTextAreaElement;\n  private preview: HTMLDivElement;\n  private submitButton: HTMLButtonElement;\n\n  private submitting = false;\n  private renderTimeout = 0;\n\n  constructor(\n    private user: User | null,\n    private readonly submit: (markdown: string) => Promise<void>\n  ) {\n    this.element = document.createElement('article');\n    this.element.classList.add('timeline-comment');\n\n    this.element.innerHTML = `\n      <a class=\"avatar\" target=\"_blank\" tabindex=\"-1\">\n        <img height=\"44\" width=\"44\">\n      </a>\n      <form class=\"comment\" accept-charset=\"UTF-8\" action=\"javascript:\">\n        <header class=\"new-comment-header\">\n          <nav class=\"tabnav-tabs\" role=\"tablist\">\n            <button type=\"button\" class=\"tabnav-tab tab-write selected\"\n                    role=\"tab\" aria-selected=\"true\">\n              Write\n            </button>\n            <button type=\"button\" class=\"tabnav-tab tab-preview\"\n                    role=\"tab\">\n              Preview\n            </button>\n          </nav>\n        </header>\n        <div class=\"comment-body\">\n          <textarea placeholder=\"Leave a comment\" aria-label=\"comment\"></textarea>\n          <div class=\"markdown-body\" style=\"display: none\">\n            ${nothingToPreview}\n          </div>\n        </div>\n        <footer class=\"comment-footer\">\n          <a class=\"text-link markdown-info\" tabindex=\"-1\" target=\"_blank\"\n             href=\"https://guides.github.com/features/mastering-markdown/\">\n            Styling with Markdown is supported\n          </a>\n          <button class=\"btn btn-primary\" type=\"submit\">Comment</button>\n        </footer>\n      </form>`;\n\n    this.avatarAnchor = this.element.firstElementChild as HTMLAnchorElement;\n    this.avatar = this.avatarAnchor.firstElementChild as HTMLImageElement;\n    this.form = this.avatarAnchor.nextElementSibling as HTMLFormElement;\n    this.textarea = this.form!.firstElementChild!.nextElementSibling!.firstElementChild as HTMLTextAreaElement;\n    this.preview = this.form!.firstElementChild!.nextElementSibling!.lastElementChild as HTMLDivElement;\n    this.submitButton = this.form!.lastElementChild!.lastElementChild as HTMLButtonElement;\n\n    this.setUser(user);\n\n    this.textarea.addEventListener('input', this.handleInput);\n    this.form.addEventListener('submit', this.handleSubmit);\n    this.form.addEventListener('click', this.handleClick);\n    handleTextAreaResize(this.textarea);\n  }\n\n  public setUser(user: User | null) {\n    this.user = user;\n    this.submitButton.textContent = user ? 'Comment' : 'Sign in to comment';\n    this.submitButton.disabled = !!user;\n\n    if (user) {\n      this.avatarAnchor.href = user.html_url;\n      this.avatar.alt = '@' + user.login;\n      this.avatar.src = user.avatar_url + '?v=3&s=88';\n    } else {\n      this.avatarAnchor.removeAttribute('href');\n      this.avatar.alt = '@anonymous';\n      this.avatar.src = anonymousAvatarUrl;\n      this.textarea.disabled = true;\n    }\n  }\n\n  public clear() {\n    this.textarea.value = '';\n  }\n\n  private handleInput = () => {\n    const text = this.textarea.value;\n    const isWhitespace = /^\\s*$/.test(text);\n    this.submitButton.disabled = isWhitespace;\n    if (this.textarea.scrollHeight < 450 && this.textarea.offsetHeight < this.textarea.scrollHeight) {\n      this.textarea.style.height = `${this.textarea.scrollHeight}px`;\n      scheduleMeasure();\n    }\n\n    clearTimeout(this.renderTimeout);\n    if (isWhitespace) {\n      this.preview.textContent = nothingToPreview;\n    } else {\n      this.preview.textContent = 'Loading preview...';\n      this.renderTimeout = setTimeout(\n        () => renderMarkdown(text).then(html => this.preview.innerHTML = html)\n          .then(() => processRenderedMarkdown(this.preview))\n          .then(scheduleMeasure),\n        500);\n    }\n  }\n\n  private handleSubmit = (event: Event) => {\n    event.preventDefault();\n    if (this.submitting) {\n      return;\n    }\n    this.submitting = true;\n    if (this.user) {\n      this.textarea.disabled = true;\n      this.submitButton.disabled = true;\n    }\n    this.submit(this.textarea.value).catch(() => 0).then(() => {\n      this.submitting = false;\n      this.textarea.disabled = !this.user;\n      this.textarea.value = '';\n      this.submitButton.disabled = false;\n      this.handleClick({ target: this.form.querySelector('.tabnav-tab.tab-write') } as any);\n      this.preview.textContent = nothingToPreview;\n    });\n  }\n\n  private handleClick = ({ target }: Event) => {\n    if (!(target instanceof HTMLButtonElement) || !target.classList.contains('tabnav-tab')) {\n      return;\n    }\n    if (target.classList.contains('selected')) {\n      return;\n    }\n    this.form.querySelector('.tabnav-tab.selected')!.classList.remove('selected');\n    target.classList.add('selected');\n    const isPreview = target.classList.contains('tab-preview');\n    this.textarea.style.display = isPreview ? 'none' : '';\n    this.preview.style.display = isPreview ? '' : 'none';\n    scheduleMeasure();\n  }\n}\n\nfunction handleTextAreaResize(textarea: HTMLTextAreaElement) {\n  const stopTracking = () => {\n    removeEventListener('mousemove', scheduleMeasure);\n    removeEventListener('mouseup', stopTracking);\n  };\n  const track = () => {\n    addEventListener('mousemove', scheduleMeasure);\n    addEventListener('mouseup', stopTracking);\n  };\n  textarea.addEventListener('mousedown', track);\n}\n","import { pageAttributes as page } from './page-attributes';\nimport {\n  Issue,\n  IssueComment,\n  User,\n  setRepoContext,\n  loadIssueByTerm,\n  loadIssueByNumber,\n  loadCommentsPage,\n  loadUser,\n  postComment,\n  createIssue\n} from './github';\nimport { login } from './oauth';\nimport { TimelineComponent } from './timeline-component';\nimport { NewCommentComponent } from './new-comment-component';\nimport { startMeasuring, scheduleMeasure } from './measure';\n\nsetRepoContext(page);\n\nfunction loadIssue(): Promise<Issue | null> {\n  if (page.issueNumber !== null) {\n    return loadIssueByNumber(page.issueNumber);\n  }\n  return loadIssueByTerm(page.issueTerm as string);\n}\n\nPromise.all([loadIssue(), loadUser()])\n  .then(([issue, user]) => bootstrap(issue, user));\n\nfunction bootstrap(issue: Issue | null, user: User | null) {\n  startMeasuring(page.origin);\n\n  const timeline = new TimelineComponent(user, issue);\n  document.body.appendChild(timeline.element);\n\n  if (issue && issue.comments > 0) {\n    loadCommentsPage(issue.number, 1)\n      .then(({ items }) => items.forEach(comment => timeline.appendComment(comment)));\n  }\n\n  if (issue && issue.locked) {\n    return;\n  }\n\n  const submit = (markdown: string) => {\n    if (user) {\n      let commentPromise: Promise<IssueComment>;\n      if (issue) {\n        commentPromise = postComment(issue.number, markdown);\n      } else {\n        commentPromise = createIssue(\n          page.issueTerm as string,\n          page.url,\n          page.title,\n          page.description\n        ).then(newIssue => {\n          issue = newIssue;\n          timeline.setIssue(issue);\n          return postComment(issue.number, markdown);\n        });\n      }\n      return commentPromise.then(comment => {\n        timeline.appendComment(comment);\n        newCommentComponent.clear();\n      });\n    }\n\n    return login().then(() => loadUser()).then(u => {\n      user = u;\n      timeline.setUser(user);\n      newCommentComponent.setUser(user);\n    });\n  };\n\n  const newCommentComponent = new NewCommentComponent(user, submit);\n  timeline.element.appendChild(newCommentComponent.element);\n  scheduleMeasure();\n}\n\naddEventListener('not-installed', function handleNotInstalled() {\n  removeEventListener('not-installed', handleNotInstalled);\n  document.querySelector('.timeline')!.insertAdjacentHTML('afterbegin', `\n  <div class=\"flash flash-error flash-not-installed\">\n    Error: utterances is not installed on <code>${page.owner}/${page.repo}</code>.\n    If you own this repo,\n    <a href=\"https://github.com/apps/utterances\" target=\"_blank\"><strong>install the app</strong></a>.\n    Read more about this change in\n    <a href=\"https://github.com/utterance/utterances/pull/25\" target=\"_blank\">the PR</a>.\n  </div>`);\n});\n"]}